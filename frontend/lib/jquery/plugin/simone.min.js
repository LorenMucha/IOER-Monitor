/*!
 * Simone - taskbar widget, JavaScript
 *
 * Copyright 2014 Cezary KluczyÅ„ski and other authors
 * Version: 0.1.9
 * Released under the MIT license.
 *
 * http://cezarykluczynski.github.io/simone/docs/index.html
 * http://cezarykluczynski.github.io/simone/docs/taskbar.html
 */!function(t,e){"use strict";t.widget("simone.taskbar",{version:"0.1.9",options:{autoHide:!1,buttons:null,buttonsOrder:[],buttonsTooltips:!1,clock:!1,clockShowDatepicker:!0,debug:{environment:!0,options:!0,localization:!0},draggable:!1,draggableBetweenEdges:!0,dropOnExisting:!1,durations:{buttonsTooltipsHide:!0,buttonsTooltipsShow:!0,autoHideDelay:1200,autoHideHide:"slow",autoHideShow:"fast"},fallbackLanguage:"en",icons:{clock:null,languageSelect:null,menuWindowClose:"ui-icon-closethick",minimizeAll:"ui-icon-minusthick",networkMonitorOffline:"ui-icon-alert",networkMonitorOnline:"ui-icon-signal",startButton:null,startButtonSet:"ui-icon-circle-triangle",toggleFullscreenOff:"ui-icon-arrow-4-diag",toggleFullscreenOn:"ui-icon-arrow-4-diag"},horizontalRowHeight:"auto",horizontalRows:1,horizontalRowsMin:1,horizontalRowsMax:2,horizontalStick:"bottom left",horizontalWidth:"100%",language:"en",languages:["en"],languageSelect:!1,localization:{},menuAutoOpenOnBrowse:!0,minimizeAll:!0,minimizeAllHoverOpaqueWindows:!0,networkMonitor:!1,orientation:"horizontal",propagateWindowBlur:!1,resizable:!1,resizableHandleOverflow:2,resolveCollisions:!0,startButtons:!0,systemButtonsOrder:["languageSelect","networkMonitor","toggleFullscreen","clock","minimizeAll"],toggleFullscreen:!1,verticalColumns:1,verticalColumnsMax:2,verticalColumnsMin:1,verticalColumnWidth:100,verticalHeight:"100%",verticalStick:"top right",viewportMargins:{top:[0,"correct"],right:[0,"correct"],bottom:[0,"correct"],left:[0,"correct"]},windowButtonsIconsOnly:!1,windowButtonsSortable:!0,windowsContainment:"viewport",windowsInitialZIndex:100,autoHideStart:null,autoHideProgress:null,autoHideStop:null,create:null,debugLogAdd:null,bind:null,unbind:null,beforeDestroy:null,dragStart:null,drag:null,dragStop:null,beforeDrop:null,drop:null,beforeDroppableOver:null,droppableOver:null,beforeDroppableOut:null,droppableOut:null,elementClose:null,elementOpen:null,languageChange:null,menuItemBlur:null,menuItemFocus:null,beforeRefresh:null,refresh:null,beforeRequestFullscreen:null,requestFullscreen:null,resizeStart:null,resize:null,resizeStop:null,sortableStart:null,sortableSort:null,sortableChange:null,sortableStop:null},_cnst:{dataPrefix:"simone-",eventPrefix:"simonetaskbar",naturalName:"Simone",consolePrefix:"Simone message",missingTranslation:"undefined",resizeDelay:100,autoHideRestartDelay:100,resizableHandleOverflowMax:3},_systemButtons:["languageSelect","minimizeAll","toggleFullscreen","networkMonitor","clock"],_systemButtonsWithSingleIcons:["languageSelect","minimizeAll","clock"],_optionsPositiveIntegers:["horizontalWidth","resizableHandleOverflow","horizontalRows","horizontalRowsMin","verticalHeight","verticalColumns","verticalColumnsMin","verticalColumns","verticalColumnWidth"],_optionsPossiblePercentages:["horizontalWidth","verticalHeight","verticalColumnWidth"],classes:{taskbar:"simone-taskbar",taskbarPrefix:"simone-taskbar-",taskbarHorizontal:"simone-taskbar-horizontal",taskbarVertical:"simone-taskbar-vertical",taskbarStickTop:"simone-taskbar-stick-top",taskbarStickBottom:"simone-taskbar-stick-bottom",taskbarStickRight:"simone-taskbar-stick-right",taskbarStickLeft:"simone-taskbar-stick-left",taskbarStickPrefix:"simone-taskbar-stick-",taskbarWithOpenElements:"simone-taskbar-with-opened-elements",container:"simone-taskbar-container",startButton:"simone-taskbar-start-button",windowButton:"simone-taskbar-window-button",separator:"simone-taskbar-separator",startButtonsContainer:"simone-taskbar-start-container",buttonsContainer:"simone-taskbar-buttons-container",systemButtonsContainer:"simone-taskbar-system-buttons-container",systemButtonsSeparator:"simone-taskbar-system-buttons-separator",windowButtonsContainer:"simone-taskbar-window-buttons-container",windowButtonsContainerFirstChild:"simone-taskbar-window-buttons-container-first-child",windowButtonsContainerOnlyChild:"simone-taskbar-window-buttons-container-only-child",droppableContainer:"simone-taskbar-droppable-container",droppable:"simone-taskbar-droppable",languageSelect:"simone-taskbar-language-select",minimizeAll:"simone-taskbar-minimize-all",toggleFullscreen:"simone-taskbar-toggle-fullscreen",networkMonitor:"simone-taskbar-network-monitor",clock:"simone-taskbar-clock",datepicker:"simone-taskbar-datepicker",draggableHelper:"simone-taskbar-helper",buttonDisabled:"simone-taskbar-button-disabled",draggableDragging:"simone-taskbar-dragging",resizable:"simone-taskbar-resizable",resizableMouseover:"simone-taskbar-resizable-mouseover",resizableResizing:"simone-taskbar-resizing",resizableDisabled:"simone-taskbar-resizable-disabled",empty:"simone-taskbar-empty",autoHide:"simone-taskbar-autohide",autoHideMouseOver:"simone-taskbar-autohide-mouseover",autoHideHidden:"simone-taskbar-autohide-hidden",autoHideHidding:"simone-taskbar-autohide-hidding",autoHidePending:"simone-taskbar-autohide-pending",autoHideShowing:"simone-taskbar-autohide-showing",window:"simone-window",windowContent:"simone-window-content",windowTitlebarButtonIcon:"simone-window-titlebar-button-icon",windowManipulationButton:"simone-window-button",windowsContainment:"simone-taskbar-windows-containment",windowCopy:"simone-taskbar-window-copy",windowGroupMenu:"simone-taskbar-window-group-menu",windowGroupMenuScroll:"simone-taskbar-window-group-menu-scroll",windowGroupElement:"simone-taskbar-window-group-element",windowGroupElementActive:"simone-taskbar-window-group-element-active",windowMinimizeAllHover:"simone-taskbar-window-minimize-all-hover",windowMinimizeAllUnhover:"simone-taskbar-window-minimize-all-unhover",windowTop:"simone-window-top",windowUnminimizable:"simone-window-unminimizable",resizeIframe:"simone-taskbar-iframe",resizeIframeHorizontal:"simone-taskbar-iframe-horizontal",resizeIframeVertical:"simone-taskbar-iframe-vertical",menuWindowClose:"simone-taskbar-window-close",windowButtonsIconsOnly:"simone-taskbar-window-buttons-icons-only",buttonTooltip:"simone-taskbar-button-tooltip",hidden:"simone-hidden",droppableOver:"simone-taskbar-droppable-over",droppablePending:"simone-taskbar-droppable-pending",taskbarIcon:"simone-taskbar-icon",taskbarContainter:"simone-taskbar-container",refreshPositionOnce:"simone-taskbar-refresh-position-once",buttonUserDefined:"simone-taskbar-button-user-defined",menuHidden:"simone-menu-hidden",uiMenu:"ui-menu",uiWidgetContent:"ui-widget-content",uiCornerPrefix:"ui-corner-",uiCornerTl:"ui-corner-tl",uiCornerTr:"ui-corner-tr",uiCornerBl:"ui-corner-bl",uiCornerBr:"ui-corner-br",uiDatepickerHeader:"ui-datepicker-header",uiDraggable:"ui-draggable",uiDroppable:"ui-droppable",uiDraggableDragging:"ui-draggable-dragging",uiResizable:"ui-resizable",uiResizableResizing:"ui-resizable-resizing",uiResizableHandle:"ui-resizable-handle",uiButton:"ui-button",uiButtonText:"ui-button-text",uiButtonIconPrimary:"ui-button-icon-primary",uiMenuItem:"ui-menu-item",uiDatepicker:"ui-datepicker",uiDatepickerDaysCellOver:"ui-datepicker-days-cell-over",uiStateActive:"ui-state-active",uiStateFocus:"ui-state-focus",uiStateHover:"ui-state-hover",uiStateDisabled:"ui-state-disabled",uiStateDefault:"ui-state-default",uiSortable:"ui-sortable",uiTooltip:"ui-tooltip",uiDialogContent:"ui-dialog-content",uiDialogTitlebar:"ui-dialog-titlebar",uiHasDatepicker:"hasDatepicker",uiIcon:"ui-icon",uiIconBlank:"ui-icon-blank"},_create:function(){this.$elem=this.element,this.$elem.parents().length||this.$elem.appendTo("body"),this._cache={inlineCSS:this.$elem.attr("style")||"",mutationObservers:{submenus:[]},intervals:{clock:null},timeouts:{autoHide:null,windowResize:null,moveToTopForced:[],minimizeAllHoverOpaqueWindowsRevert:null},connectedElements:{},openedElements:!1,progress:{windowButtonsSortable:!1,taskbarDraggable:!1,taskbarResizable:!1,windowResizable:!1,menuAutoOpenOnBrowse:!1},horizontalAutoHeight:!1,windows:{},groups:{},windowButtons:[],internalCallbacks:{afterResolveCollisions:null,afterRefresh:null},optionSetter:{previousValue:null},mousedownTarget:t(),suppressEvents:!1,resizeCausesRefresh:!1,keepCollidedPosition:!1,collisions:this._zeroDirections(),suppressSingleGroupClick:!1,uep:this._cnst.eventPrefix+this.uuid},this.$windowButtonsContainer=t(),this.$systemButtonsContainer=t(),this.$startButtonsContainer=t(),this.$buttonsContainer=t(),this.$containers=t(),this.$minimizeAll=t(),this.$toggleFullscreen=t(),this.$networkMonitor=t(),this.$clock=t(),this.$datepicker=t(),this.$languageSelect=t(),this.$languageSelectMenu=t(),this.$windowsContainment=t(),this.$windowCopy=t(),this.$droppableTop=t(),this.$droppableRight=t(),this.$droppableBottom=t(),this.$droppableLeft=t(),this.$elem.addClass(this.classes.taskbar+" "+this.classes.uiWidgetContent).attr("data-taskbar-uuid",this.uuid).uniqueId().data(this._cnst.dataPrefix+"taskbar",this),this._consolePrefix(!0),this._checkForInvalidOptions(e,this.options,!0),this._createWindowsContainment(),this._resizeIframeListener(),this._bindGlobalEvents(),this._initialize(),this._setwindowButtonsIconsOnlyClass(),this._refreshWindowsPosition(),this._trigger("create")},_refresh:function(){this._cache.suppressEvents=!0,this.refresh(),this._cache.suppressEvents=!1},_initialize:function(){var t=this.$elem.hasClass(this.classes.refreshPositionOnce);this._debug(),this._createStyles(),this._setDimensions(),this._setTaskbarPositionDimensions(),this._tryAfterResolveCollisions(),this._setDraggable(),this._setDroppable(),this._buildTaskbarContent(),this._setResizable(),this._setTaskbarRoundedCorners(),this._initAutoHide(),t||(this._resizeWindowsContainment(),this._refreshWindowsPosition()),this._setWindowButtonsSizes(),this._setButtonsTooltips(),this._setDraggableContainment(),this._refreshWindowsTaskbarId(),this._debugCheckOrphans(),this._refreshSeparators()},_debug:function(){this._debugEnvironment(),this._debugLocalization(),this._debugOptions()},_debugLogAdd:function(e,i,s){var n={message:e,level:i,levelName:{0:"error",1:"warning",2:"notice"}[i],type:s,typeName:{0:"environment",1:"localization",2:"options"}[s]},o=this._consolePrefix();return n.$target=t("#"+this._cnst.consolePrefixIdReal),this._trigger("debugLogAdd",{},n)!==!1&&window.console&&this.options.debug[n.typeName]?void(0===n.level&&console.error?console.error(o+n.message):1===n.level&&console.warn?console.warn(o+n.message):2===n.level&&console.log&&console.log(o+n.message)):!1},_consolePrefix:function(t,e){if(t===!0)this._cnst.consolePrefixId=" for taskbar #"+this.$elem[0].id,this._cnst.consolePrefixIdReal=this.$elem[0].id;else{if("string"!=typeof t||!t.length)return this._cnst.consolePrefix+this._cnst.consolePrefixId+": ";this._cnst.consolePrefixId=" for "+e+" #"+t,this._cnst.consolePrefixIdReal=t}},_debugEnvironment:function(){this.options;t.ui.position||this._debugLogAdd("jQuery UI Position is required for this plugin to work.",0,0),t.ui.dialog||this._debugLogAdd("jQuery UI Dialog is required for taskbar windows to work.",0,0),t.simone.window||this._debugLogAdd(this._cnst.naturalName+" Window is required for taskbar windows to work.",0,0),t.ui.button||this._debugLogAdd("jQuery UI Button is required for taskbar buttons to work.",0,0),"none"===this._styleIndicator(this.classes.uiIcon,"backgroundImage").backgroundImage&&this._debugLogAdd("jQuery UI Theme is probably missing.",1,0),("fixed"!==this._styleIndicator(this.classes.taskbar,"position").position||"fixed"!==this._styleIndicator(this.classes.window,"position").position)&&this._debugLogAdd("Stylesheet for "+this._cnst.naturalName+" is probably missing.",1,0),"relative"===t("body").css("position")&&this._debugLogAdd("Body with position:relative will not work with jQuery UI Draggable or jQuery UI Resizable.",0,0)},_debugCheckOrphans:function(){var t=this.$elem.children().not("."+this.classes.uiMenu).not("."+this.classes.container).not("."+this.classes.separator).not("."+this.classes.resizable).not("."+this.classes.menuHidden).filter(":visible");if(t.length){var e=this._debugLogAdd("There are elements presents in the taskbar that are neither hidden or part of the taskbar. Maybe you forgot to "+(this.options.startButtons?'set "startButtons" option to true or ':"")+'add ".'+this.classes.menuHidden+'" class to some menus.',1,0);e!==!1&&this.options.debug.environment&&window.console&&console.log(t)}},_debugMenu:function(){return t.ui.menu||this._debugLogAdd("jQuery UI Menu is required for taskbar menus to work.",1,0),!!t.ui.menu},_debugLocalization:function(){var e,i=this.options;this._isRealEmptyObject(t.simone.taskbar.prototype.options.localization)?this._debugLogAdd("Localization file is probably missing.",1,1):t.simone.taskbar.prototype.options.localization||this._debugLogAdd("Localization file is missing.",0,1),this._isRealEmptyObject(i.localization)?this._debugLogAdd("Localization object is empty.",1,1):i.localization||this._debugLogAdd("Localization option is not an object.",0,1);for(var s in i.languages)i.languages.hasOwnProperty(s)&&(e=i.languages[s],t.simone.taskbar.prototype.options.localization&&!t.simone.taskbar.prototype.options.localization[e]&&this._debugLogAdd('Missing taskbar translations for language "'+e+'".',1,1),!(i.clock&&i.clockShowDatepicker&&t.ui.datepicker)||t.datepicker&&t.datepicker.regional&&t.datepicker.regional["en"==e?"":e]||this._debugLogAdd('Missing jQuery UI Datepicker translations for language "'+e+'".',1,1))},_debugOptions:function(){{var e;this.options}for(e in this._optionsPositiveIntegers)if(this._optionsPositiveIntegers.hasOwnProperty(e)){var i=this._optionsPositiveIntegers[e],s=parseInt(this.options[i],10);(1>s||isNaN(s))&&!this._isPercent(s)&&t.inArray(s,this._optionsPossiblePercentages)&&(this._debugLogAdd(i+" should not be lower than 1, setting to 1.",1,2),this.options[i]=Math.max(this.options[i],1))}this.options.resizableHandleOverflow===parseInt(this.options.resizableHandleOverflow,10)&&this.options.resizableHandleOverflow>this._cnst.resizableHandleOverflowMax&&this._debugLogAdd("resizableHandleOverflow should not be higher than "+this._cnst.resizableHandleOverflowMax+", as it would damage resizable experience on windows touching taskbar.",1,2);for(e in this.options.buttons)t.inArray(e,this._systemButtons)>-1&&this._debugLogAdd('Custom button "'+e+'" detected. Custom button should not share names with native buttons.',1,2)},_setDimensions:function(e){var i=!e,e=e||this.options,s="horizontal"===e.orientation;i&&s&&this.$elem&&this.$elem.length&&this.$elem.css("height","auto");var n,o=s?i?e.horizontalRowHeight:this._cache.horizontalRowHeight:i?e.verticalColumnWidth:this._cache.verticalColumnWidth,a="auto"===o,r={};return r.stickHorizontal=s?-1!==e.horizontalStick.indexOf("right")?"right":"left":-1!==e.verticalStick.indexOf("right")?"right":"left",r.stickVertical=s?-1!==e.horizontalStick.indexOf("top")?"top":"bottom":-1!==e.verticalStick.indexOf("top")?"top":"bottom",r.horizontal=s,i&&(this._copyStyles({to:this.$elem,properties:["top","bottom","left","right","width","marginTop","marginBottom","marginLeft","marginRight"]}),this._hideInternals()),this._setTaskbarPositionClasses(r,e),n=this._translateSize(e),i&&(r.edge=s?this.options.horizontalStick.match(/bottom/)?"bottom":"top":this.options.verticalStick.match(/left/)?"left":"right",this._cache.horizontalRowHeight=!s||a?this._computeAutoHeight({edge:r.edge}):o,this._cache.verticalColumnWidth=this._translateSize(t.extend({},e,{orientation:"horizontal",horizontalWidth:e.verticalColumnWidth})),this.$elem.data(this._cnst.dataPrefix+"taskbarEdge",r.edge)),r.secondarySize=s?(i?this._getRealRowCol("horizontal"):e.horizontalRows)*this._cache.horizontalRowHeight:(i?this._getRealRowCol("vertical"):e.verticalColumns)*this._cache.verticalColumnWidth,r.actualSize=n,i&&this.options.resolveCollisions===!0&&(r=this._setWidthAndHeight(r),r.colissionCss=this._zeroDirections(),t.extend(this._cache,r),this._setTaskbarPositionDimensions(),r=this._resolveCollisions(r)),r=this._setWidthAndHeight(r),i&&t.extend(this._cache,r),r},_setWidthAndHeight:function(t){return t.width=t.horizontal?t.actualSize:t.secondarySize,t.height=t.horizontal?t.secondarySize:t.actualSize,t},_translateSize:function(t){var e,i=this._getContainmentInner(),s="horizontal"===t.orientation,n=s?t.horizontalWidth:t.verticalHeight,o=this._isPercent(n);return o?e=parseFloat(n,10)/100*(s?i.width:i.height):"auto"===n&&s||(e=n),parseInt(e,10)},_isPercent:function(t){return"string"==typeof t&&"%"===t.substr(-1)},_getRealRowCol:function(t){var e=this.options;return"horizontal"===t?(e.horizontalRowsMax<e.horizontalRowsMin&&this._debugLogAdd('"horizontalRowsMax" should not be lower than "horizontalRowsMin".',1,2),Math.max(Math.min(e.horizontalRows,e.horizontalRowsMax),e.horizontalRowsMin)):"vertical"===t?(e.verticalColumnsMax<e.verticalColumnsMin&&this._debugLogAdd('"verticalColumnsMax" should not be lower than "verticalColumnsMin".',1,2),Math.max(Math.min(e.verticalColumns,e.verticalColumnsMax),e.verticalColumnsMin)):void 0},_removeTaskbarPositionClasses:function(t){var e=t&&t.elem?t.elem:this.$elem;e.removeClass(this.classes.taskbarHorizontal+" "+this.classes.taskbarVertical+" "+this.classes.taskbarStickTop+" "+this.classes.taskbarStickBottom+" "+this.classes.taskbarStickRight+" "+this.classes.taskbarStickLeft)},_setTaskbarPositionClasses:function(t,e){var i=e&&e.elem?e.elem:this.$elem;this._removeTaskbarPositionClasses(e),i.addClass(" "+(t.horizontal?this.classes.taskbarHorizontal:this.classes.taskbarVertical)+" "+this.classes.taskbarStickPrefix+t.stickVertical+" "+this.classes.taskbarStickPrefix+t.stickHorizontal)},_setTaskbarRoundedCorners:function(t){this._removeTaskbarRoundedCorners(t),this._addTaskbarRoundedCorners(t)},_removeTaskbarRoundedCorners:function(t){var e=t&&t.elem?t.elem:this.$elem;e.find("."+this.classes.resizable).andSelf().removeClass(this.classes.uiCornerTl+" "+this.classes.uiCornerTr+" "+this.classes.uiCornerBl+" "+this.classes.uiCornerBr)},_addTaskbarRoundedCorners:function(t){var e=this._cache,i=this.options,s="horizontal"===i.orientation,n=this._getContainment(),o=t&&t.elem?t.elem:this.$elem;if(s&&("100%"==i.horizontalWidth||this._cache.horizontalRowHeight>=n.width)||!s&&("100%"==i.verticalHeight||this._cache.height>=n.height))return!1;var a,r="top"===e.stickVertical,l="bottom"===e.stickVertical,h="left"===e.stickHorizontal,c="right"===e.stickHorizontal;switch(!0){case r&&h:a="br";break;case r&&c:a="bl";break;case l&&h:a="tr";break;case l&&c:a="tl"}var d=t&&t.skipResizable?o:o.find("."+this.classes.resizable).andSelf();d.addClass(this.classes.uiCornerPrefix+a)},_resolveCollisions:function(e){var i=this,s="horizontal"===this.options.orientation,n=(e.actualSize,e.secondarySize,this.$windowsContainment.data(this._cnst.dataPrefix+"taskbar-margins")),o=e.edge,a=this._getTaskbarList(),r=this._neighbouringEdges(),l=(this._getContainment(),this._extendedPosition.call(this.$elem)),h=this._zeroDirections(),c=t(),d=this._cache.keepCollidedPosition,u=d?this._cache.collisions:this._zeroDirections();return"object"!=typeof n||d||t.each(r[o],function(e,s){var r=a[s].not(this.$elem);0!==n[s]&&r.length>0&&r.each(function(){var e=t(this),n=i._extendedPosition.call(e);("left"===o&&n.left<l.right||"right"===o&&n.right>l.left)&&("top"===s&&n.bottom>l.top&&(h.top=Math.max(h.top,n.bottom)),"bottom"===s&&n.top<l.bottom&&(h.bottom=Math.max(h.bottom,n.height))),("top"===o&&n.top<l.bottom||"bottom"===o&&n.bottom>l.top)&&("left"===s&&n.right>l.left&&(h.left=Math.max(h.left,n.right)),"right"===s&&n.left<l.right&&(h.right=Math.max(h.right,n.width)))})}),d&&(h=u),this._cache.collisions=h,t.each(a,function(e,i){i.each(function(){c=c.add(t(this))})}),c=c.not(this.$elem),e.actualSize-=s?h.right+h.left:h.top+h.bottom,e.colissionCss=h,!this.$elem.hasClass(this.classes.refreshPositionOnce)&&c.length&&this._bindInternal("afterResolveCollisions",function(){c.each(function(){var e=t(this);e.hasClass(i.classes.taskbar)&&!e.hasClass(i.classes.refreshPositionOnce)&&e.addClass(i.classes.refreshPositionOnce).data(i._cnst.dataPrefix+"taskbar")._refresh()})}),e},_tryAfterResolveCollisions:function(){this._triggerInternal("afterResolveCollisions"),this.$elem.removeClass(this.classes.refreshPositionOnce)},_refreshNeighbours:function(){var e=this,i=this._getTaskbarList(),s=this._neighbouringEdges();t.each(s[this._cache.edge],function(s,n){i[n].each(function(){t(this).data(e._cnst.dataPrefix+"taskbar")._refresh()})})},_setTaskbarPositionDimensions:function(t){var e=t&&t._cache?t._cache:this._cache,i=!t,s=t&&t.elem?t.elem:this.$elem,n=t&&t.addClass?t.addClass:"";if(s.addClass(n).css({width:e.width,height:e.height}),i&&this.options.resolveCollisions===!0)for(var o in e.colissionCss)e.colissionCss[o]>0&&s.css(o,e.colissionCss[o])},_computeAutoHeight:function(e){var i=t("<div></div>").addClass(this.classes.taskbar+" "+this.classes.taskbarHorizontal+" "+this.classes.taskbarStickPrefix+e.edge).prependTo(t("body"));this._setTaskbarRoundedCorners({skipResizable:!0,elem:i});var s=this._factory("startButtonsContainer");this.$elem&&this.$elem.length&&this._copyStyles({from:this.$elem,to:s,properties:["fontSize","lineHeight"]});this._factory("startButton",{text:"Placeholder",name:"start"}).prependTo(s);s.prependTo(i);var n=i.outerHeight();return s.remove(),i.remove(),n},_bindGlobalEvents:function(){function e(){var e=t("."+i.classes.window+"."+i.classes.uiDraggableDragging),s=t("."+i.classes.window+"."+i.classes.uiResizableResizing);if(e.length||s.length){var n=(e.length?e:s).children("."+i.classes.windowContent);if(n.is(i.windows()))return n}return t()}var i=this;t(window).on("resize."+this._cache.uep,function(t,e){return t.target!==window?!0:e&&"taskbar-iframe"===e.caller?(clearInterval(i._cache.timeouts.windowResize),i._cache.keepCollidedPosition=!0,i._refresh(),i._cache.keepCollidedPosition=!1,void i._refreshWindowsPosition({skipFitting:!0})):(t.delegateTarget===window&&i._resizeEvent(!0),!0)}),t(window).on("mousedown."+this._cache.uep,function(e){i._cache.mousedownTarget=t(e.target)}),t(window).on("blur."+this._cache.uep,function(){i.options.propagateWindowBlur&&(i._blurWindows(),i.hideSubordinates())}),t(document).on("click."+this._cache.uep,function(e){var s=i.$windowsContainment.data(i._cnst.dataPrefix+"preventClicks"),n=!1;!isNaN(parseInt(s,10))&&s>0&&(i.$windowsContainment.data(i._cnst.dataPrefix+"preventClicks",--s),n=!0);var o=t(e.target),o=o.is("body")?i._cache.mousedownTarget:o,a=o.closest("."+i.classes.uiDatepickerHeader),r=i.$elem[0].nodeName.toLowerCase()+"#"+i.$elem[0].id+" ",l="[data-taskbar-uuid="+i.uuid+"]",h=o.is("NaN[data-menu-type] *, [data-menu-button], [data-menu-button] *, [data-group-name], [data-group-name] *, ."+i.classes.windowGroupMenu+", ."+i.classes.windowGroupMenu+" *, ."+i.classes.windowButton+",  ."+i.classes.windowButton+" *")||o.parent().is("[data-group-name]"),c=o.is(r+"."+i.classes.datepicker+", "+r+"."+i.classes.datepicker+" *, "+r+"."+i.classes.clock+", "+r+"."+i.classes.clock+" *"),d=a.attr("data-taskbar-uuid")==i.uuid,u=o.is("."+i.classes.window+", ."+i.classes.window+" *, ."+i.classes.windowManipulationButton+", ."+i.classes.windowManipulationButton+" span, ."+i.classes.windowTitlebarButtonIcon),m=o.is("."+i.classes.windowButton+", ."+i.classes.windowButton+" *, ."+i.classes.windowGroupMenu+", ."+i.classes.windowGroupMenu+" *"),p=o.is("."+t.simone.window.prototype.classes.dialogOverlay+l);c=c||d,h||i._hideMenus({own:!0}),c||i._hideDatepickers({own:!0,blur:!h}),h||c||i._openedElements(!1),u||m||p||n||(i._blurWindows(),i.blurConnectedButtons()),i._hideTooltips(),i._openedElements()&&i._setConnectedButtonsStates()}),t(window).on("scroll."+this._cache.uep,function(){if(i._setDraggableContainment(),i._refreshWindowsContainment({refreshPosition:!1}),i.$elem.hasClass(i.classes.draggableDragging)){var s=i.$elem.data(i.classes.uiDraggable);s._setContainment(),t("."+i.classes.droppable).each(function(){var e=t(this),s=e.data(i.classes.uiDroppable);s.offset=e.offset()})}var n=e();if(n.length){var o=n.parent().hasClass(i.classes.uiDraggableDragging),a=n.data(i._cnst.dataPrefix+"window");if(o){var r=a._getRealContainment();if("visible"===r){a._setContainment();var l=n.parent().data(i.classes.uiDraggable);l._setContainment()}}else a._refreshContainmentSize()}}),t(document).on("mousewheel."+this._cache.uep,function(t){(i._cache.progress.windowButtonsSortable||i._cache.progress.taskbarResizable||e().parent().hasClass(i.classes.uiResizableResizing))&&t.preventDefault()});var s=function(){i._setNetworkMonitorStatus()};t(window).on("online."+this._cache.uep,s),t(window).on("offline."+this._cache.uep,s)},_setDraggable:function(){function e(t){return t.originalOffset=h,t}var i=this,s=this.options,n=this._cache,o=s.draggable,a=i.$elem,r=a.hasClass(this.classes.uiDraggable);if(!o&&r&&a.draggable("destroy"),!o||t.ui.draggable&&t.ui.droppable||this._debugLogAdd("jQuery UI Draggable and Droppable are required for draggable taskbar to work.",1,0),o&&t.ui.draggable&&t.ui.droppable){var l=function(){var e,s=i._factory("draggableHelper").css({width:n.verticalColumnWidth,height:n.horizontalRowHeight,position:"fixed"}),o=0;t.each(["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],function(t,i){var s=parseInt(a.css(i),10);s>o&&(o=s,e=i.slice(0,-5))});var r=a.css(e+"Color");return t.each(["borderTop","borderRight","borderBottom","borderLeft"],function(t,e){s.css(e+"Width","1px").css(e+"Color",r)}),i._copyStyles({from:a,to:s,properties:["boxSizing","backgroundColor","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"]}),s},h={},s={scroll:!1,containment:"window",cursor:"move",distance:1,revert:"invalid",iframeFix:!0,revertDuration:!1,cancel:"."+this.classes.uiButton+", ."+this.classes.uiMenu+", ."+this.classes.uiDatepicker+(window.navigator.userAgent.match(/Trident/)&&!this._cache.horizontal?", ."+i.classes.windowButtonsContainer:""),cursorAt:{left:parseInt(n.verticalColumnWidth/2,10),top:parseInt(n.horizontalRowHeight/2,10)},helper:l,start:function(s,n){i._cache.progress.taskbarDraggable=!0,i._startShowing({quick:!0}),i.$elem.data(i._cnst.dataPrefix+"window-scrolls",{x:t(window).scrollLeft(),y:t(window).scrollTop()}),h=i.$elem.offset(),i.$elem.addClass(i.classes.draggableDragging),i._hideAll(),i._showDroppable(),i._trigger("dragStart",s,e(n))},stop:function(s,n){i._hideDroppable(),i.$elem.removeClass(i.classes.draggableDragging),t("."+i.classes.droppablePending).removeClass(i.classes.droppablePending),i._cache.progress.taskbarDraggable=!1,i.$elem.removeData(i._cnst.dataPrefix+"window-scrolls"),i.windows().window("refreshPosition",{skipOnFit:!0}),i._trigger("dragStop",s,e(n))},drag:function(s,n){if(parseFloat(t.ui.dialog.prototype.version)>=1.11){var o=i.$elem.data(i._cnst.dataPrefix+"window-scrolls");n.position.left+=o.x-t(window).scrollLeft(),n.position.top+=o.y-t(window).scrollTop()}i._trigger("drag",s,e(n))},disabled:!o};r?a.draggable("option",s):a.draggable(s),this._setDraggableContainment()}},_setDraggableContainment:function(){if(this.options.draggable&&t.ui.draggable&&t.ui.droppable&&this.$elem.hasClass(this.classes.uiDraggable)&&this.$windowCopy.length&&this.$droppableRight.length){var e=this._extendedPosition.call(this.$windowCopy),i=this._extendedPosition.call(this.$droppableRight),s=this._extendedPosition.call(this.$droppableBottom),n=this._getWindowScroll(),o=[n.x,n.y,n.x+e.width-i.width,n.y+e.height-s.height];this.$elem.draggable("option","containment",o)}},_setResizable:function(i){var s=this,n=s._cache,o=s.options.resizable,a="horizontal"===s.options.orientation,r=a?n.stickVertical:n.stickHorizontal,l=s.options.orientation,h=s.$elem,c=h.find("."+s.classes.resizable);if(o&&!t.ui.resizable&&this._debugLogAdd("jQuery UI Resizable is required for resizable taskbar to work.",1,0),i&&i.destroy&&c.hasClass(this.classes.uiResizableResizing))return!0;if(c.hasClass(this.classes.uiResizable)&&c.resizable("destroy"),c.remove(),!(!t.ui.resizable||i&&i.destroy)){if(c=s._factory("resizable").prependTo(h),"auto"===this.options.horizontalWidth&&a){var d=this.$elem.outerWidth();c.css("width",d)}var u={horizontal:{bottom:"n",top:"s"},vertical:{left:"e",right:"w"}},m={horizontal:{bottom:[0,n.horizontalRowHeight],top:[0,n.horizontalRowHeight]},vertical:{left:[n.verticalColumnWidth,0],right:[n.verticalColumnWidth,0]}},p={horizontal:{width:0,height:n.horizontalRowHeight*this.options.horizontalRowsMin},vertical:{width:n.verticalColumnWidth*this.options.verticalColumnsMin,height:0}},g={horizontal:{width:0,height:n.horizontalRowHeight*this.options.horizontalRowsMax},vertical:{width:n.verticalColumnWidth*this.options.verticalColumnsMax,height:0}},f=function(t){var e,i,o=s.options,a={};return a.helper=t.helper,a.gridPosition=t.gridPosition,a.originalGridPosition=t.originalGridPosition,a.originalSizeAxis="horizontal"===o.orientation?n.horizontalRowHeight:n.verticalColumnWidth,a.originalGridPosition="horizontal"===o.orientation?o.horizontalRows:o.verticalColumns,"horizontal"===o.orientation&&(e=t.size.height,i=e/n.horizontalRowHeight),"vertical"===o.orientation&&(e=t.size.width,i=e/n.verticalColumnWidth),a.sizeAxis=e,a.gridPosition=Math.round(i),a.orientation=o.orientation,a},_={axis:0,gridPosition:0,first:!1},b=function(t,e,i){var n=s._cache.horizontal?"bottom":"right",o=s._cache.horizontal?"top":"left",a=s._cache.horizontal?"height":"width";if(s._cache.edge===n){var r=!1;if("resize"===i||"stop"===i){e.gridPosition||(r=!0,e.gridPosition=1);var l=_.axis/_.gridPosition,h=e.sizeAxis/e.gridPosition;if(h!==l){var c=h-l,d=Math.round(parseFloat(e.helper.css(o))),u=Math.round(parseFloat(e.helper.css(a)));return r&&(u=l+c),e.helper.css(o,d+c).css(a,u-c),!0}}}};c.resizable({grid:m[l][r],handles:u[l][r],minWidth:p[l].width,minHeight:p[l].height,maxWidth:g[l].width,maxHeight:g[l].height,distance:0,delay:0,start:function(e,i){s._cache.progress.taskbarResizable=!0,i=f(i),_.axis=i.sizeAxis,_.first=!0,_.gridPosition=i.originalGridPosition,s._startShowing({quick:!0}),s.$elem.addClass(s.classes.resizableResizing),t(e.target).css(s._styleIndicator(s.classes.uiWidgetContent+" "+s.classes.uiStateActive,"borderColor")),s._trigger("resizeStart",e,i)},resize:function(t,e){e=f(e);var i;s._versionOf("resizable",">=","1.11.1")&&(i=b(t,e,"resize")),s._setTaskbarRoundedCorners({skipResizable:e.gridPosition!==e.originalGridPosition}),_.first&&i||s._trigger("resize",t,e),_.first=!1},stop:function(t,e){var i=s.options;e=f(e),s._versionOf("resizable",">=","1.11.1")&&b(t,e,"stop"),"horizontal"===i.orientation&&(i.horizontalRows=Math.round(e.gridPosition)),"vertical"===i.orientation&&(i.verticalColumns=Math.round(e.gridPosition)),s.$elem.removeClass(s.classes.resizableResizing),s._cache.keepCollidedPosition=!0,s._refresh(),s._cache.keepCollidedPosition=!1,s._cache.progress.taskbarResizable=!1,s._trigger("resizeStop",t,e)},disabled:!o});var w=function(i){var n=t(this),a=n.closest("."+s.classes.resizable),r="horizontal"===s.options.orientation,l=!r,h=r?s._cache.stickVertical:s._cache.stickHorizontal;if(i.originalEvent===e&&(s.options.resizable||a.addClass(s.classes.resizableDisabled)),a.hasClass(s.classes.uiResizableResizing))return!0;var c=a.closest("."+s.classes.taskbar),u=a.find("."+s.classes.uiResizableHandle),m={b:parseInt(c.css("borderBottomWidth"),10),t:parseInt(c.css("borderTopWidth"),10),r:parseInt(c.css("borderRightWidth"),10),l:parseInt(c.css("borderLeftWidth"),10)},p=s.options.resizableHandleOverflow,g={top:"auto",bottom:"auto",left:"auto",right:"auto",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderStyle:c.css("borderStyle")},f={top:"auto",bottom:"auto",left:"auto",right:"auto"};o&&("mouseleave"===i.type&&t.extend(g,s._styleIndicator(s.classes.uiWidgetContent,"borderColor")),"mouseenter"===i.type&&t.extend(g,s._styleIndicator(s.classes.uiWidgetContent+" "+s.classes.uiStateFocus,"borderColor")));var _=1;r&&"top"===h&&(f.height=2*p+m.b,"mouseenter"===i.type&&(f.bottom=-1*f.height+p),"mouseleave"===i.type&&(f.bottom=-p+_)),r&&"bottom"===h&&(f.height=2*p+m.t,"mouseenter"===i.type&&(f.top=-1*f.height+p+_),"mouseleave"===i.type&&(f.top=-p)),l&&"left"===h&&(f.width=2*p+m.r,"mouseenter"===i.type&&(f.right=-1*f.width+p),"mouseleave"===i.type&&(f.right=-p+_)),l&&"right"===h&&(f.width=2*p+m.l,"mouseenter"===i.type&&(f.left=-1*f.width+p+_),"mouseleave"===i.type&&(f.left=-p)),"mouseenter"===i.type&&(g.top=0-m.t,g.left=0-m.l,r&&"top"==h&&(g.borderBottomWidth=o?m.b:0,g.top=0-m.t-m.b),r&&"bottom"===h&&(g.borderTopWidth=o?m.t:0),l&&"left"===h&&(g.borderRightWidth=o?m.r:0,g.left=0-m.l-m.r),l&&"right"===h&&(g.borderLeftWidth=o?m.l:0),g.width=d||s._cache.width,g.height=s._cache.height),"mouseleave"===i.type&&(r&&(g.left=0-m.l),l&&(g.top=0-m.t),r&&"top"===h&&(g.top=s._cache.height-m.t),r&&"bottom"===h&&(g.top=0-m.t),l&&"left"===h&&(g.left=s._cache.width-m.l),l&&"right"===h&&(g.left=0-m.l),g.width=r?d||s._cache.width:_,g.height=l?s._cache.height:_),u.css(f).toggleClass(s.classes.resizableMouseover,"mouseleave"===i.type),a.css(g)
};c.find("."+this.classes.uiResizableHandle).on("mouseenter."+this._cnst.eventPrefix+"resizablehandle mouseleave."+this._cnst.eventPrefix+"resizablehandle",w).on("mousedown."+this._cache.uep,function(){return s.options.resizable?void s._hideAll():!0}).trigger("mouseleave."+this._cnst.eventPrefix+"resizablehandle")}},_getContainment:function(){return{width:t(window).width(),height:t(window).height()}},_getContainmentInner:function(){return{width:t(window).innerWidth(),height:t(window).innerHeight()}},_showDroppable:function(){this.$elem;t("."+this.classes.droppable+"[data-taskbar-uuid= "+this.uuid+"]").removeClass(this.classes.hidden)},_hideDroppable:function(){t("."+this.classes.droppable+"[data-taskbar-uuid= "+this.uuid+"]").addClass(this.classes.hidden)},_setDroppable:function(){if(t("."+this.classes.droppableContainer+"[data-taskbar-uuid= "+this.uuid+"]").remove(),this.options.draggable){var e,i,s=this,n=this.options,o=s._factory("droppableContainer").insertAfter(s.$elem),a=(this._getContainment(),{top:"top left",right:"right top",bottom:"bottom left",left:"left top"}),r=this._cache;t.each(["top","right","bottom","left"],function(l,h){function c(e,i){var n=t(this);i.originalEdge=s._cache.edge,i.edge=n.data(s._cnst.dataPrefix+"droppable-edge");var o=i.edge.match(/top|bottom/),a=s.options;return i.originalOrientation=a.orientation,i.orientation=o?"horizontal":"vertical",delete i.draggable,i}e=t.inArray(h,["top","bottom"])>-1;var d=h.charAt(0).toUpperCase()+h.slice(1);s["$droppable"+d]=i=s._factory("droppable").data(s._cnst.dataPrefix+"droppable-edge",h).uniqueId().appendTo(o),r=s._setDimensions({elem:i,orientation:e?"horizontal":"vertical",horizontalWidth:"100%",horizontalStick:a[h],horizontalRows:1,horizontalRowHeight:r.horizontalRowHeight,verticalHeight:"100%",verticalStick:a[h],verticalColumns:1,verticalColumnWidth:r.verticalColumnWidth}),s._setTaskbarPositionDimensions({elem:i,_cache:r,addClass:s.classes.hidden});var u=function(t,e){var i=e.data(s._cnst.dataPrefix+"droppable-edge"),n=t.data(s._cnst.dataPrefix+"taskbarEdge"),o=s.$windowsContainment.data(s._cnst.dataPrefix+"taskbar-margins"),a=s.uuid===t.data(s._cnst.dataPrefix+"taskbar").uuid&&(s.options.dropOnExisting||0===o[i]||n==i);return a},m=function(e,i){var o,a=t(e.target),r=s.options;if(!a.hasClass(s.classes.droppableOver)&&"dropover"!==e.type)return!1;var l,h=s._getContainment(),c=s.classes.taskbarPrefix,d=c+"stick-",u=[],m=a.attr("class").split(" ").map(function(e){return t.inArray(e,[c+"horizontal",c+"vertical"])>-1?l=e.replace(s.classes.taskbarPrefix,""):-1!==e.indexOf(d)?e.replace(d,""):void 0});if("orientation"===r.draggable&&l!==r.orientation||"vertical"===r.draggable&&"horizontal"===l||"horizontal"===r.draggable&&"vertical"===l)return!1;if("dropover"===e.type)return!0;for(var p in m){if(t.inArray(m[p],["right","left"])>-1&&"horizontal"===l)if(o=e.clientX>h.width/2?"right":"left",n.draggableBetweenEdges)m[p]=o;else{if(-1===r.horizontalStick.indexOf(o))return!1;m[p]=n.horizontalStick.replace(/(bottom|top)/,"")}if(t.inArray(m[p],["top","bottom"])>-1&&"vertical"===l)if(o=e.clientY>h.height/2?"bottom":"top",n.draggableBetweenEdges)m[p]=o;else{if(-1===r.verticalStick.indexOf(o))return!1;m[p]=n.verticalStick.replace(/(left|right)/,"")}}t.each(m,function(e){m[e]=t.trim(m[e])}),u=t.grep(m,function(e){return t.inArray(e,["right","left","bottom","top"])>-1}),u=t.unique(u);var g;"horizontal"===l&&(g=t.inArray("top",u)>-1?"top":"bottom"),"vertical"===l&&(g=t.inArray("left",u)>-1?"left":"right");var f=l+"Stick",_=u.join(" ");_={"left bottom":"bottom left","right bottom":"bottom right","left top":"top left","right top":"top right"}[_]||_;var b=r[f]===_&&r.orientation===l;return i.originalEdge=s._cache.edge,i.edge=g,i.originalStick=r[f],i.stick=_,i.originalOrientation=r.orientation,i.orientation=l,delete i.draggable,s._trigger("beforeDrop",e,t.extend({},i))===!1?!1:(b||(r[f]=_,s.$elem.taskbar("option","orientation",l)),void s._trigger("drop",e,t.extend({},i)))},p={accept:function(e){return e.hasClass(s.classes.taskbar)?u(e,t(this)):!1},drop:m,out:function(e,i){var n=t(this);i.highlighted=n.hasClass(s.classes.droppableOver),i=c.call(this,e,i),s._trigger("beforeDroppableOut",e,t.extend({},i)),n.css("backgroundColor","").removeClass(s.classes.droppableOver+" "+s.classes.droppablePending),t("."+s.classes.droppablePending).css("backgroundColor",s.$elem.css("backgroundColor")).removeClass(s.classes.droppablePending).addClass(s.classes.droppableOver),s._trigger("droppableOut",e,t.extend({},i))},over:function(e,i){t("."+s.classes.droppableOver).css("backgroundColor","").removeClass(s.classes.droppableOver).addClass(s.classes.droppablePending),i=c.call(this,e,i),m(e,t.extend({},i))!==!1&&s._trigger("beforeDroppableOver",e,t.extend(!0,{},i))!==!1&&(t(this).addClass(s.classes.droppableOver).css("backgroundColor",s.$elem.css("backgroundColor")),s._trigger("droppableOver",e,t.extend({},i)))},tolerance:"touch"};i.hasClass(s.classes.uiDroppable)?i.droppable("option",p):i.droppable(p)})}},_getDictionary:function(t){var e=this.options.localization;return"object"==typeof e&&null!==e?e[t||this.options.language]||{}:{}},_i18n:function(t,i,s){var n=s===e?this.options.language:s,o=this._getDictionary(n);if(!o[t]&&(o=this._getDictionary(this.options.fallbackLanguage),!o[t]))return this._debugLogAdd('Missing translation key "'+t+'" in both language "'+n+'" and fallback language "'+this.options.fallbackLanguage+'".',1,1),this._cnst.missingTranslation;var a=o[t];return a=this._i18n_replace_keys(a,i)},_i18n_replace_keys:function(t,e){if(e&&"object"==typeof e)for(var i in e)t=t.replace(":"===i.charAt(0)?i:":"+i,e[i]);return t},_hideInternals:function(){this.$elem.find("[data-menu-type=start]").hide()},_hideDatepickers:function(e){var i=this,s=e&&e.own?this.$elem:t("."+this.classes.taskbar),n=s.find("."+this.classes.datepicker);e&&e.not&&(i._openedElements(!0),n=n.not(e.not)),n.each(function(){var e=t(this),s=i._taskbarInstance(e);return e.is(":visible")&&s._triggerBindedElementEvent({type:"elementClose",menu:e,closeByOpen:!0,button:s.connectedElement(e)})===!1?!0:void e.hide()}),(!e||e.blur)&&this._blurAllConnectedButtons(),this._closeOtherTaskbarsOpenedElements(e)},_hideMenus:function(e){var i=this,s=e&&e.own?this.$elem:t("."+this.classes.taskbar),n=s.find("[data-menu-type], ."+this.classes.windowGroupMenu),o=s.find("."+this.classes.startButton);e&&e.not&&(i._openedElements(!0),n=n.not(e.not)),n.each(function(){var e=t(this),s=e.add(e.find(i.classes.uiMenu)).filter("."+i.classes.uiMenu);s.menu("collapseAll").menu("blur");var n=i._taskbarInstance(e);if(e.is(":visible")){if(n._triggerBindedElementEvent({type:"elementClose",menu:e,closeByOpen:!0,button:n.connectedElement(e)})===!1)return!0;e.find("ul:visible").andSelf().hide()}}),o.removeClass(this.classes.uiStateActive),this._blurAllConnectedButtons(),this._closeOtherTaskbarsOpenedElements(e)},_hideAll:function(t){this._hideDatepickers(),this._hideMenus(),this._hideTooltips(),t&&t.blurWindows===!1||this._blurWindows(),this._openedElements(!1),this._closeOtherTaskbarsOpenedElements(t)},_closeOtherTaskbarsOpenedElements:function(e){var i=this;e&&e.own||t("."+this.classes.taskbar).not(this.$elem).each(function(){var e=t(this),s=e.data(i._cnst.dataPrefix+"taskbar");s._openedElements(!1)})},blurConnectedButtons:function(){var e=this,i=(t(this),"[data-menu-type], ."+this.classes.datepicker);t(i,this.$elem).each(function(){var i=t(this),s=e.connectedElement(i);s.length&&!i.is(":visible")&&s.removeClass(e.classes.uiStateActive)});var s=this.windows(),n={},o={},a=t(),r=function(t){return t.window("option","group")};s.each(function(){var e=t(this),i=r(e);i?(n[i]||(n[i]=0,o[i]=0),++n[i]):a=a.add(e)}),s.each(function(){var i=t(this),s=r(i);return parseInt(o[s])!==o[s]?!0:(++o[s],void((i.parent().hasClass(e.classes.windowTop)||n[s]===o[s])&&(a=a.add(i),o[s]=null)))}),a.each(function(){var i=t(this),s=e.connectedElement(i).filter("."+e.classes.uiButton);s.length&&!i.parent().hasClass(e.classes.windowTop)&&s.removeClass(e.classes.uiStateActive)})},_blurAllConnectedButtons:function(){t("."+this.classes.taskbar).taskbar("blurConnectedButtons")},_buildTaskbarContent:function(e){{var i=this.options,s=this.classes,n=this.$elem;"horizontal"===i.orientation}return this.$startButtonsContainer=n.find("."+s.startButtonsContainer),this.$buttonsContainer=n.find("."+s.buttonsContainer),this.$windowButtonsContainer=n.find("."+s.windowButtonsContainer),this.$elem.children("[data-separator-for]").not("[data-separator-for=systemButtonsContainer]").remove(),this.$startButtonsContainer.remove(),this.$buttonsContainer.children(":not(."+s.buttonUserDefined+")").remove(),e&&e.destroy?(this.$buttonsContainer.remove(),this.$windowButtonsContainer.remove(),this._buildSystemButtons(e),this._buildTaskbarStartButtons(e),!0):(this._buildSystemButtons(t.extend(!0,{},e,{rebuildAll:!0})),this._buildTaskbarStartButtons(),this.$buttonsContainer=this.$buttonsContainer.length?this.$buttonsContainer:this._factory("buttonsContainer").appendTo(n),this._rebuildTaskbarButtons({skipWindowButtonsContainerResize:!0}),this.$windowButtonsContainer.length||(this.$windowButtonsContainer=this._factory("windowButtonsContainer").insertAfter(this.$buttonsContainer)),this._initSortableWindowButtons(),this.$containers=this.$elem.find("."+s.container),n.toggleClass(s.empty,!this.$containers.children().length),void this._refreshWindowButtonsContainer())},_setSortableWindowButtons:function(){this.options.windowButtonsSortable?this._initSortableWindowButtons():this._destroySortableWindowButtons()},_initSortableWindowButtons:function(){var e=this,i=this.options,s=this.classes,n="horizontal"===i.orientation;if(i.windowButtonsSortable)if(t.ui.sortable){var o=function(i,o){if(!n){var a=e.$windowButtonsContainer.data(s.uiSortable),r=e._extendedPosition.call(t(o.helper),"offset"),l=e._extendedPosition.call(e.$windowButtonsContainer,"offset");a.containment[3]=l.bottom-r.height-parseFloat(t(o.item).css("marginBottom"))}},a={offset:{},position:{}},r=function(e){var i={};return i.item=e.item,i.helper=e.helper,i.placeholder=e.placeholder,i.sender=null,i.offset=t.extend({},e.offset||t(e.placeholder).offset()),i.originalOffset=t.extend({},a.offset),i.position=t.extend({},e.position||t(e.placeholder).position()),i.originalPosition=t.extend({},a.position),i};this.$windowButtonsContainer.hasClass(s.uiSortable)||this.$windowButtonsContainer.sortable({disabled:!i.windowButtonsSortable,containment:"parent",forcePlaceholderSize:!0,cursor:"move",tolerance:"pointer",cancel:"."+s.uiMenu,helper:"clone",start:function(i,n){if(e._cache.progress.windowButtonsSortable=!0,t(n.placeholder).removeClass(s.uiStateActive+" "+s.uiStateFocus).addClass(s.uiStateHover),e._hideAll(),e._blurAllConnectedButtons(),a.offset=t(n.placeholder).offset(),a.position=t(n.placeholder).position(),o(i,n),e._cache.horizontal){var l=t(n.item).data(e._cnst.dataPrefix+"taskbarButtonFloatWidth");t(n.placeholder).css("width",l)}e._startShowing({duration:!1}),e._trigger("sortableStart",i,r(n))},change:function(t,i){e._trigger("sortableChange",t,r(i))},sort:function(t,i){e._trigger("sortableSort",t,r(i))},stop:function(i,n){e._openedElements(!1),e._cache.progress.windowButtonsSortable=!1,t(n.placeholder).removeClass(s.uiStateHover),e._trigger("sortableStop",i,r(n))}}),this.$windowButtonsContainer.sortable("option",{scroll:!n,axis:n?1===i.horizontalRows?"x":!1:"y"})}else this._debugLogAdd("jQuery UI Sortable is required for sortable window buttons to work.",1,0)},_destroySortableWindowButtons:function(){!this.options.windowButtonsSortable&&this.$windowButtonsContainer.hasClass(this.classes.uiSortable)&&this.$windowButtonsContainer.sortable("destroy")},_filterNonEmptyContainers:function(e,i){var s=t(this);if(i&&s.css("position").match(/absolute|fixed/))return!1;var n=s.children(":visible");if(!n.length)return!1;var o=!1;return n.each(function(){var i=t(this);return i.hasClass(e.classes.uiButton)||i.attr("data-menu-type")?(o=!0,!1):void 0}),o},_buildSystemButtons:function(e){var i=this,s=this.options;if(this.$systemButtonsContainer=this.$elem.find("."+this.classes.systemButtonsContainer),this.$systemButtonsContainer.children(":not(."+this.classes.buttonUserDefined+")").remove(),this._cache.intervals.clock>0&&(clearInterval(this._cache.intervals.clock),this._cache.intervals.clock=0),this.$systemButtonsContainer.siblings("[data-separator-for=systemButtonsContainer]").remove(),e&&e.destroy)return this.$systemButtonsContainer.remove(),!0;if(this.$systemButtonsContainer=this.$systemButtonsContainer.length?this.$systemButtonsContainer:this._factory("systemButtonsContainer").appendTo(this.$elem),t.each(s.systemButtonsOrder,function(e,n){switch(n){case"languageSelect":s.languageSelect&&t.inArray("languageSelect",s.systemButtonsOrder)>-1&&(s.languages.length?i._buildTaskbarLanguageSelect():i._debugLogAdd('Language select menu wasn\'t build because the "languages" option is empty.',1,1));break;case"minimizeAll":s.minimizeAll&&t.inArray("minimizeAll",s.systemButtonsOrder)>-1&&i._buildTaskbarMinimizeAll();break;case"toggleFullscreen":s.toggleFullscreen&&t.inArray("toggleFullscreen",s.systemButtonsOrder)>-1&&i._fullscreenAvailable()&&i._buildTaskbarToggleFullscreen();break;case"networkMonitor":s.networkMonitor&&t.inArray("networkMonitor",s.systemButtonsOrder)>-1&&"undefined"!=typeof window.navigator.onLine&&i._buildTaskbarNetworkMonitor();break;case"clock":s.clock&&t.inArray("clock",s.systemButtonsOrder)>-1&&i._buildTaskbarClock();break;default:if(s.buttons&&n in s.buttons){var o={};o[n]=s.buttons[n],i._buildTaskbarButtons({buttons:o,container:i.$systemButtonsContainer})}}}),this._detachUserDefinedButtons.call(this.$systemButtonsContainer,this),this.$systemButtonsContainer.children().length){var n=this._setSeparators(this.$systemButtonsContainer);n.addClass(this.classes.systemButtonsSeparator),this._fixSystemButtonsSeparator()}this._setSystemButtonsOrder(),this._positionSystemButtonConnectedElements(),e&&e.rebuildAll||this._setwindowButtonsContainerSize()},_setSystemButtonsOrder:function(){var e=this;t.each(this.options.systemButtonsOrder,function(t,i){e.$systemButtonsContainer.find("[data-button-name="+i+"]").appendTo(e.$systemButtonsContainer)})},_fixSystemButtonsSeparator:function(){this._cache.horizontal||this.$elem.find("[data-separator-for=systemButtonsContainer]").css({position:"absolute",bottom:this.$systemButtonsContainer.outerHeight()})},_positionSystemButtonConnectedElements:function(){this.options.languageSelect&&this.options.languages.length&&(this._positionTaskbarLanguageSelect(),this.$languageSelectMenu.length&&this.$languageSelectMenu.hide()),this.options.clock&&this.options.clockShowDatepicker&&t.ui.datepicker&&(this._positionTaskbarDatepicker(),this.$datepicker&&this.$datepicker.hide())},_rebuildTaskbarButtons:function(t){var e=this.options.buttons;this.$elem.find("[data-separator-for=buttonsContainer]").remove(),e&&(this._buildTaskbarButtons({buttons:this._extractObjectsByKey(e,this.options.buttonsOrder),container:this.$buttonsContainer}),this._positionTopContainersContent.call(this.$buttonsContainer,this)),this._detachUserDefinedButtons.call(this.$buttonsContainer,this),t&&t.skipWindowButtonsContainerResize||this._refreshWindowButtonsContainer(),e&&this._setSeparators(this.$buttonsContainer)},_detachUserDefinedButtons:function(e){this.find("."+e.classes.buttonUserDefined).each(function(){var i=t(this),s=i.data("button-name");-1===t.inArray(s,e.options.systemButtonsOrder)&&-1===t.inArray(s,e.options.buttonsOrder)&&i.detach()})},_setSeparators:function(e){var i=e.attr("data-container-name"),s=this._factory("separator").attr("data-separator-for",i);return e.each(function(){var e=t(this);e.siblings("[data-separator-for="+i+"]").remove(),s.insertAfter(e).css("float",e.css("float")),0===e.children().length&&s.hide()}),s},_refreshSeparators:function(){this._setSeparators(this.$buttonsContainer),this._setSeparators(this.$systemButtonsContainer),this._setSeparators(this.$startButtonsContainer),this._fixSystemButtonsSeparator()},_menuPosition:function(e){var i=this,e=e instanceof t?{of:e}:e,s=this.$elem,n=e.of;if(e&&e.of&&e.of.length){var o,a=e.elem||null,r="horizontal"===this.options.orientation,l="top"===this._cache.edge,h="left"===this._cache.edge,c=n.closest("."+this.classes.container),d=c.css("float"),u="none"===d?"center":d,m=c.css("position"),p="absolute"===m?"bottom":"top",g="absolute"===m?"bottom":"center",f=this._extendedPosition.call(c,"offset"),_=this._extendedPosition.call(n,"offset"),b=this._extendedPosition.call(s,"offset"),w=this._extendedPosition.call(this.$windowsContainment),v="";if(this._copyStyles({to:a,properties:["maxHeight","bottom","top","left","right"]}),a&&a.hasClass(this.classes.windowGroupMenu)){a.removeClass(this.classes.windowGroupMenuScroll).css("maxHeight","");var C=this._extendedPosition.call(a,"offset"),k=parseFloat(a.css("paddingTop"))+parseFloat(a.css("paddingBottom"))+parseFloat(a.css("borderTopWidth"))+parseFloat(a.css("borderBottomWidth")),z=C.height-k,y=w.height-k;z>y&&a.addClass(this.classes.windowGroupMenuScroll),a.css("maxHeight",y)}return o=r?{of:n,my:u+v+" "+(l?"top":"bottom"),at:u+" "+(l?"bottom":"top"),collision:"flip",using:function(e){t(this).css(e);var s=i._extendedPosition.call(t(this),"offset"),n=parseFloat(t(this).css("top"));t(this).css("top",l?n+(b.bottom-s.top):n-(s.bottom-b.top))}}:{of:s,my:(h?"left":"right")+v+" "+g+("top"===p?"+":"-")+Math.round(Math.abs(f[p]-_[p])),at:(h?"right":"left")+" "+g,collision:"flipfit",using:function(e){var s=t(this);if(s.css(e),a){var n=i._extendedPosition.call(s,"offset"),o=i._extendedPosition.call(i.connectedElement(this).filter("."+i.classes.uiButton),"offset"),r=parseFloat(s.css("top"));o.top<n.top&&s.css("top",r+(o.top-n.top)),o.bottom>n.bottom&&s.css("top",r+(o.bottom-n.bottom)),!i._cache.horizontal&&"right"===i._cache.edge&&s.is(":visible")&&s.css("left",Math.round(parseFloat(s.css("left"))+b.left-i._extendedPosition.call(s,"offset").right))}}}}},_buildTaskbarStartButtons:function(e){var i=this,s=this.$elem,n=s.find("[data-menu-type=start][data-menu-lang="+this.options.language+"]:not(."+this.classes.menuHidden+'), [data-menu-type=start][data-menu-lang="*"]:not(.'+this.classes.menuHidden+")");if(!this.options.startButtons||e&&e.destroy)return void this._destroyMenus("[data-menu-type=start]");this._destroyMenus("."+this.classes.menuHidden),this.$startButtonsContainer=this._factory("startButtonsContainer"),this.$buttonsContainer.length?this.$startButtonsContainer.insertBefore(this.$buttonsContainer):this.$startButtonsContainer.appendTo(s);var o=!1;n.each(function(){var e=t(this),s=e.attr("data-menu-name")||"start";if(!i._debugMenu())return!0;var n=i._i18n("startButton:"+s),a=i._factory("startButton",{name:s}).attr("title","undefined"!==n?n:s).appendTo(i.$startButtonsContainer);"undefined"===n&&i._debugLogAdd('Missing translation for start button named "'+s+'" in language "'+i.options.language+'".',1,1),i._connectElements(a,e),o||(i._positionTopContainersContent.call(i.$startButtonsContainer,i),o=!0);var r=i._menuPosition({of:a,elem:e}),l=function(s,n){var o=t(n.item),r=o.closest("."+i.classes.uiMenu),l=o.children("."+i.classes.uiMenu+":eq(0)"),h=l.parents("."+i.classes.uiMenu).filter(":last"),c=i._cache.horizontal||"right"!=i._cache.stickHorizontal?"right":"left",d=i._cache.horizontal&&"bottom"==i._cache.stickVertical?"bottom":"top";if("menufocus"===s.type&&i._triggerBindedElementEvent({type:"menuItemFocus",item:o,menu:e,button:a,event:s}),"menuselect"===s.type&&!l.length)return i._hideMenus(),i._hideTooltips(),void i._openedElements(!1);if(l.length){var u=function(){var t,e,s=function(t){return t.offset().top+t.outerHeight()},n=function(t){return t.offset().top},a=l.children("."+i.classes.uiMenuItem+":last"),u=l.children("."+i.classes.uiMenuItem+":eq(0)"),m=i._extendedPosition.call(r,"offset"),p=i._extendedPosition.call(l,"offset"),g=-1*(p.left-m.right),f=-1*parseFloat(i._styleIndicator("."+i.classes.uiMenu+" > ."+i.classes.uiMenuItem+" > a."+i.classes.uiStateActive,"marginTop").marginTop),_={of:r,at:"right bottom"};l.removeAttr("data-fix-menu-position"),"bottom"==d&&(t=s(h)-s(r),_.my="left-"+Math.round(g)+" bottom+"+Math.round(t));var b=parseFloat(window.getComputedStyle(r[0]).borderRightWidth);if("top"==d&&("left"==c&&(g=r.outerWidth()-parseFloat(r.css("paddingRight"))-b),t=n(h)-n(r),_.at="right top",_.my=("left"==c?"right":"left")+"-"+Math.round(g)+" top+"+t),l.position(_),"bottom"==d&&(e=n(o)-n(u),0>e&&(_.my="left-"+Math.round(g)+" bottom+"+Math.round(t+f+e))),"top"==d&&(e=n(o)-n(a),e>0&&(_.my=("left"==c?"right":"left")+"-"+Math.round(g)+" top+"+Math.round(t+f+e))),l.position(_),"horizontal"===i.options.orientation){var w=i._extendedPosition.call(r,"offset"),v=i._extendedPosition.call(l,"offset"),C=Math.round(w.right-v.left-b),k=parseFloat(r.attr("data-fix-menu-position")),z=k||C;if(z>0){var y=parseFloat(l.css("left"));l.css("left",Math.round(y+z)).attr("data-fix-menu-position",k||C)}}i._disconnectObservers("submenus")},m=i._MutationObserver();m?l.each(function(){i._disconnectObservers("submenus");var e=t(this),s=new m(function(){var t="block"==e.css("display")&&e[0].style.cssText.match(/^(?=.*\btop\b)(?=.*\bleft).*$/);t&&u(),("none"==r.css("display")||"none"===h.css("display"))&&i._disconnectObservers("submenus")});s.observe(this,{attributes:!0,attributeFilter:["style"]}),i._cache.mutationObservers.submenus.push(s)}):setTimeout(u,t.ui.menu.prototype.delay)}};e.show().menu({focus:l,select:l,blur:function(s,n){i._triggerBindedElementEvent({type:"menuItemBlur",item:t(n.item),menu:e,button:a,event:s})}}).position(r).hide(),a.on("click."+i._cache.uep,function(){i._hideMenus({not:e}),i._hideTooltips(),i._stopOtherTaskbarsAutoOpenOnBrowse();var s=e.is(":visible");i._triggerBindedElementEvent({type:s?"elementClose":"elementOpen",menu:e,button:a})!==!1&&(t(this).addClass(i.classes.uiStateActive),e.toggle(),s?i._openedElements(!1):(i._openedElements(!0),e.find("."+i.classes.uiStateActive).removeClass(i.classes.uiStateActive)))}),i._bindMenuAutoOpen(a,e),a.on("mouseup."+i._cache.uep+" mouseleave."+i._cache.uep,function(){i._setConnectedButtonState.apply(this,[i])})}),n.length&&this._setSeparators(this.$startButtonsContainer)},_rebuildTaskbarStartButtons:function(){this.$startButtonsContainer.remove(),this._buildTaskbarStartButtons(),this._refreshWindowButtonsContainer()},_buildTaskbarButtons:function(e){var i=this;t.each(e.buttons,function(s,n){if("string"==typeof n.labelLocalized&&(n.label=i._i18n(n.labelLocalized)||n.label),n.label||(i._debugLogAdd('No label or labelLocalized providen for button "'+s+'".',2,1),n.label=s),e.buttons[s].$element&&e.buttons[s].$element.length){if(e.buttons[s].$element&&e.buttons[s].$element.length)return e.buttons[s].$element.appendTo(e.container),!0}else e.buttons[s].$element=t("<div></div>").appendTo(e.container);e.buttons[s].$element.button(n).attr("data-button-name",s).attr("title",n.label).addClass(i.classes.buttonUserDefined)})},_buildTaskbarLanguageSelect:function(){var e=this;this._debugMenu()&&(this.$languageSelect=this._factory("languageSelect").appendTo(this.$systemButtonsContainer).text(this._i18n("slug")).attr("title",this._i18n("languageSelect")).attr("data-button-name","languageSelect").button(),this._refreshButtonIcon.call(this.$languageSelect,this),this._afterSystemButtonCreate(),this.$languageSelectMenu=this._factory("languageSelectMenu"),t.each(this.options.languages,function(i,s){return e._translationsExists(s)?void e.$languageSelectMenu.append(t("<li></li>").attr("data-language-code",s).append(t("<a></a>").attr("href","#").text(e._i18n("name",null,s))).on("click."+e._cache.uep,function(i){i.preventDefault(),e.$elem.taskbar("option","language",t(this).attr("data-language-code")),e._openedElements(!1)})):!0}),this.$languageSelectMenu.appendTo(this.$systemButtonsContainer).show().menu({focus:function(i,s){e._triggerBindedElementEvent({type:"menuItemFocus",item:t(s.item),menu:e.$languageSelectMenu,button:e.$languageSelect,event:i})},blur:function(i,s){e._triggerBindedElementEvent({type:"menuItemBlur",item:t(s.item),menu:e.$languageSelectMenu,button:e.$languageSelect,event:i})}}),this.$languageSelect.on("click."+this._cache.uep,function(){e._hideMenus({not:e.$languageSelectMenu}),e._hideDatepickers(),e._hideTooltips();var t=e.$languageSelectMenu.is(":visible");e._triggerBindedElementEvent({type:t?"elementClose":"elementOpen",menu:e.$languageSelectMenu,button:e.$languageSelect})!==!1&&(e.$languageSelectMenu.toggle(),t?e._openedElements(!1):(e._positionTaskbarLanguageSelect(),e._openedElements(!0)))}),this._bindMenuAutoOpen(this.$languageSelect,this.$languageSelectMenu),this._connectElements(this.$languageSelect,this.$languageSelectMenu),this.$languageSelect.on("mouseup."+this._cache.uep+" mouseleave."+this._cache.uep,function(){e._setConnectedButtonState.apply(this,[e])}))},_positionTaskbarLanguageSelect:function(){this.$languageSelect.length&&this.$languageSelectMenu.length&&this.$languageSelectMenu.position(this._menuPosition({of:this.$languageSelect,elem:this.$languageSelectMenu}))},_translationsExists:function(t){return t in this.options.localization?!0:(this._debugLogAdd('Value "'+t+'" present in languages option, but not present in "localization".',1,1),!1)},_languageChange:function(){var i=this;t.each(this._cache.windowButtons,function(t,s){if(s===e)return!0;if("group:"===s.substr(0,6)){var n=i.$elem.find("."+i.classes.windowButton+"[data-group-name="+s.substr(6)+"]");i._groupSetTranslatedTitle.call(n,i)}}),t.each(this._cache.windows,function(){var e=t(this).data(i._cnst.dataPrefix+"window");e._languageChange()})},_minimizeAll:function(){{var e=this,i=t("."+this.classes.windowContent);i.length}this.$windowsContainment.data(this._cnst.dataPrefix+"minimizeAllInProgress",!0),i.each(function(){var i=t(this);if(!i.window("minimized")&&i.window("option","minimizable")){var s=i.window("option","durations.minimize");i.window("option","durations.minimize",!1).window("minimize").window("option","durations.minimize",s)}var n=i.data(e._cnst.dataPrefix+"window");n._setConnectedButtonState()}),e.$windowsContainment.data(e._cnst.dataPrefix+"minimizeAllInProgress",!1)},_buildTaskbarMinimizeAll:function(){var t=this;this.$minimizeAll=this._factory("minimizeAll").appendTo(this.$systemButtonsContainer).text(this._i18n("minimizeAll")).attr("data-button-name","minimizeAll").button({text:!1}).on("click."+this._cache.uep,function(){t._minimizeAll()}),this._setMinimizeAllHoverOpaqueWindows(),this._refreshButtonIcon.call(this.$minimizeAll,this),this._afterSystemButtonCreate()},_setMinimizeAllHoverOpaqueWindows:function(){var e=this;t("."+this.classes.window).removeClass(this.classes.windowMinimizeAllHover+" "+this.classes.windowMinimizeAllUnhover),this.$minimizeAll.off("mouseenter."+this._cache.uep+" mouseleave."+this._cache.uep),this.options.minimizeAllHoverOpaqueWindows?this.$minimizeAll.on("mouseenter."+this._cache.uep+" mouseleave."+this._cache.uep,function(i){if(t("."+e.classes.window).removeClass(e.classes.windowMinimizeAllHover+" "+e.classes.windowMinimizeAllUnhover),"mouseenter"===i.type)t("."+e.classes.window).not("."+e.classes.windowUnminimizable).addClass(e.classes.windowMinimizeAllHover).removeClass(e.classes.windowMinimizeAllUnhover),clearTimeout(e._cache.timeouts.minimizeAllHoverOpaqueWindowsRevert);else{t("."+e.classes.window).addClass(e.classes.windowMinimizeAllUnhover).removeClass(e.classes.windowMinimizeAllHover);var s=e._styleIndicator(e.classes.windowMinimizeAllUnhover,["transitionDuration","mozTransitionDuration","webkitTransitionDuration","oTransitionDuration"]),n=1;t.each(s,function(t,e){return e?(n=2*parseFloat(e,10),!1):void 0}),n*=1e3,e._cache.timeouts.minimizeAllHoverOpaqueWindowsRevert=setTimeout(function(){t("."+e.classes.window).removeClass(e.classes.windowMinimizeAllUnhover)},n)}}):clearTimeout(e._cache.timeouts.minimizeAllHoverOpaqueWindowsRevert)},_buildTaskbarToggleFullscreen:function(){var t=this;this.$toggleFullscreen=this._factory("toggleFullscreen").appendTo(this.$systemButtonsContainer).attr("data-button-name","toggleFullscreen").button({text:!1}).on("click."+this._cache.uep,function(e){var i={},s=t._fullscreenEnabled();i.fullscreenEnabled=s,t._trigger("beforeRequestFullscreen",e,i)!==!1&&(i={},s?t._fullscreenLeave():t._fullscreenEnter(),t._setFullscreenToggleState(),i.fullscreenEnabledBefore=s,i.fullscreenEnabled=t._fullscreenEnabled(),t._trigger("requestFullscreen",e,i))}),this._setFullscreenToggleState(),this._afterSystemButtonCreate()},_setFullscreenToggleState:function(){this.$toggleFullscreen.button("option","label",this._i18n(this._fullscreenEnabled()?"toggleFullscreenLeave":"toggleFullscreenEnter")),this._refreshButtonIcon.call(this.$toggleFullscreen,this)},_buildTaskbarNetworkMonitor:function(){this.$networkMonitor=this._factory("networkMonitor").appendTo(this.$systemButtonsContainer),this.$networkMonitor.attr("data-button-name","networkMonitor").button({text:!1}),this._disableButton.call(this.$networkMonitor,this),this._setNetworkMonitorStatus(),this._afterSystemButtonCreate()},_getNetworkMonitorKey:function(){var t=!!window.navigator.onLine;return"networkMonitor"+(t?"Online":"Offline")},_setNetworkMonitorStatus:function(){this.$networkMonitor.length&&(this.$networkMonitor.button("option","label",this._i18n(this._getNetworkMonitorKey())),this._refreshButtonIcon.call(this.$networkMonitor,this))},_buildTaskbarClock:function(){var t=this;this.$clock=this._factory("clock").appendTo(this.$systemButtonsContainer).attr("data-button-name","clock").button(),this._refreshButtonIcon.call(this.$clock,this),this._afterSystemButtonCreate(),this._setClockWidth(),this._cache.intervals.clock=setInterval(function(){t._clockUpdate()},1e3),this._buildTaskbarClockDatepicker()},_buildTaskbarClockDatepicker:function(){var e=this,i=function(){e.$datepicker.find("."+e.classes.uiDatepickerHeader).attr("data-taskbar-uuid",e.uuid)};if(!this.options.clock||!this.options.clockShowDatepicker||t.ui.datepicker&&t.datepicker||this._debugLogAdd("jQuery UI Datepicker is required for clock datepicker to work.",1,0),this.options.clock&&this.options.clockShowDatepicker&&t.ui.datepicker&&t.datepicker){var s=this._i18n("code");this.$datepicker&&this.$datepicker.length&&this.$datepicker.remove();var n=t.datepicker&&this._isRealObject(t.datepicker.regional)?t.datepicker.regional["en"==s?"":s]||{}:{};this.$datepicker=this._factory("datepicker").prependTo(this.$systemButtonsContainer).uniqueId().datepicker(n).hide(),this.$datepicker.datepicker("option","onChangeMonthYear",i),this.$clock.off("click."+this._cache.uep).on("click."+this._cache.uep,function(){e._hideMenus(),e._hideTooltips(),e._hideDatepickers({not:e.$datepicker}),e._stopOtherTaskbarsAutoOpenOnBrowse();var t=e.$datepicker.is(":visible");e._triggerBindedElementEvent({type:t?"elementClose":"elementOpen",menu:e.$datepicker,button:e.$clock})!==!1&&(e.$datepicker.toggle(),t?e._openedElements(!1):(i(),e._positionTaskbarDatepicker(),e._openedElements(!0)))}),this._bindMenuAutoOpen(this.$clock,this.$datepicker),this._connectElements(this.$clock,this.$datepicker),this.$clock.off("mouseup."+this._cache.uep+" mouseleave."+this._cache.uep).on("mouseup."+this._cache.uep+" mouseleave."+this._cache.uep,function(){e._setConnectedButtonState.apply(this,[e])})}else this.$clock&&this.$clock.length&&this._disableButton.call(this.$clock,this)},_setClockWidth:function(){if(this.$clock.length){var t=this._getFormattedTime({hour:11,minute:11,second:11,millisec:111,timezone:0}),e=this.$clock.outerWidth();this.$clock.css("width","auto"),this.$clock.button("option","label",t),this.$clock.css("width",this.$clock.css("width")),e!==this.$clock.outerWidth()&&this.$windowButtonsContainer.length&&this._refreshWindowButtonsContainer(),this._clockUpdate()}},_disableButton:function(t){this.button("option","disabled",!0).removeClass(t.classes.uiStateDisabled).addClass(t.classes.buttonDisabled).on("click."+t._cache.uep,function(){t._hideAll()
})},_positionTaskbarDatepicker:function(){var t=this;this._datepickerSetPosition(),this.$datepicker.off("click."+this._cache.uep).on("click."+this._cache.uep,function(){t._datepickerSetPosition()})},_positionTopContainersContent:function(e){var i=t(this);i.css("marginTop",""),e._cache.horizontal&&"top"===e._cache.edge&&e.options.horizontalRows>1&&i.each(function(){var i=t(this),s=e.$elem.outerHeight(),n=i.outerHeight(),o=(parseFloat(i.css("paddingTop"))+parseFloat(i.css("paddingBottom")),parseFloat(e.$elem.css("borderTopWidth"))+parseFloat(e.$elem.css("borderBottomWidth"))),a=s-n-o;i.css("marginTop",a)})},_setButtonsTooltips:function(){if(this.options.buttonsTooltips&&!t.ui.tooltip&&this._debugLogAdd("jQuery UI Tooltip is required for buttons tooltips to work.",1,0),t.ui.tooltip){var e=this,i={top:{my:"right top+2",at:"right bottom",collision:"flipfip"},bottom:{my:"right bottom-2",at:"right top",collision:"flipfip"},left:{my:"left bottom-2",at:"left top",collision:"flipfip"},right:{my:"right bottom-2",at:"right top",collision:"flipfip"}},s=this.$elem.find("."+this.classes.systemButtonsContainer+" > ."+this.classes.uiButton).add(this.$elem.find("."+this.classes.windowButtonsContainer+" > ."+this.classes.uiButton)).add(this.$elem.find("."+this.classes.buttonsContainer+" > ."+this.classes.uiButton)).add(this.$elem.find("."+this.classes.startButtonsContainer+" > ."+this.classes.uiButton));if(!this.options.buttonsTooltips)return void s.each(function(){var i=t(this),s=e._getTooltipInstance.call(i);if(s)try{i.tooltip("destroy")}catch(n){}});var n="horizontal"===this.options.orientation;s.each(function(){var s=t(this),o=e._getTooltipInstance.call(s);if(o)return!0;var a=t.extend({},i[e._cache.edge]),r=s.parents(),l=r.is(e.$startButtonsContainer)||r.is(e.$buttonsContainer);if(e._cache.edge.match(/top|bottom/)){var h=n&&l;h&&(a.my=a.my.replace("right","left"),a.at=a.at.replace("right","left")),n&&r.is(e.$windowButtonsContainer)&&(a.my=a.my.replace("right","center"),a.at=a.at.replace("right","center"))}if(e._cache.edge.match(/left|right/)){var c=!n&&l;c&&(a.my=a.my.replace("bottom","top"),a.at=a.at.replace("top","bottom"))}s.tooltip({position:a,tooltipClass:e.classes.buttonTooltip,show:e.options.durations.buttonsTooltipsShow,hide:e.options.durations.buttonsTooltipsHide,open:function(i,n){{var o=t(n.tooltip),a=t(i.target);o[0].id,a[0].id}e._hideTooltips({not:a}),o.on("mouseenter."+e._cache.uep,function(){e._hideTooltips(),e._hideToolTipNoAnimation.call(a,e,o)});var r=e.connectedElement(s).filter("."+e.classes.uiHasDatepicker).add(e.connectedElement(s).filter("."+e.classes.uiMenu));r.length&&r.is(":visible")&&e._hideTooltips()}})})}},_hideTooltips:function(e){if(t.ui.tooltip){var i=this,s=t("."+this.classes.taskbar).find('[aria-describedby^="'+this.classes.uiTooltip+'"]').not(e&&e.not?e.not:null);s.each(function(){var e=t(this),s=i._getTooltipInstance.call(e);s&&i._hideToolTipNoAnimation.call(e,i)})}},_hideToolTipNoAnimation:function(e,i){if(!i){var s=this.attr("aria-describedby");i=t("#"+s)}var n=this.tooltip("option","hide");this.tooltip("option","hide",!1),this.tooltip("close"),t("div."+e.classes.uiTooltip).stop(!0,!0).hide(),this.tooltip("option","hide",n)},_getTooltipInstance:function(){var t=null;try{t=this.tooltip("widget")}catch(e){}return t},_afterSystemButtonCreate:function(){this._positionTopContainersContent.call(this.$systemButtonsContainer,this)},_isNativeElement:function(t){return t.hasClass(this.classes.separator)||t.hasClass(this.classes.container)},_refreshWindowButtonsContainer:function(){this._setwindowButtonsContainerSize(),this._setWindowButtonsSizes()},_setwindowButtonsContainerSize:function(){this.$windowButtonsContainer.css({width:0,height:0}),this._cache.horizontal&&this.$windowButtonsContainer.scrollTop(0);var e,i,s,n,o,a,r,l=this,h="horizontal"===this.options.orientation,c=this.$windowButtonsContainer,d=window.getComputedStyle(c[0]),u=this.$windowButtonsContainer.prevAll(":not(:empty):visible:eq(0)").filter(function(){var e=t(this);return l._isNativeElement(e)?"right"===e.css("float")&&l._cache.horizontal?!1:"absolute"!==e.css("position")||l._cache.horizontal?!0:!1:!1});if(h)c.removeClass(this.classes.windowButtonsContainerFirstChild+" "+this.classes.windowButtonsContainerOnlyChild),e=c.siblings().filter(function(){var e=t(this);return l._isNativeElement(e)?"right"===e.css("float")?!0:void 0:!1}),e=e.filter(":not(:empty):eq(0)"),i=e.length?e.position().left:this.$elem.outerWidth()-c.position().left,s=u.length?u.position().left+u.outerWidth():parseInt(this.$elem.css("left"),10)||0,n=parseFloat(this._styleIndicator("$."+this.classes.windowButtonsContainer+" > div."+this.classes.windowButton,"paddingLeft").paddingLeft);else{var m=c.siblings().filter(function(){return l._filterNonEmptyContainers.call(t(this),l,!0)}),p=c.siblings().filter(function(){return l._filterNonEmptyContainers.call(t(this),l)});this.$windowButtonsContainer.toggleClass(this.classes.windowButtonsContainerFirstChild,!m.length),this.$windowButtonsContainer.toggleClass(this.classes.windowButtonsContainerOnlyChild,!p.length&&!m.length);var g=this.$systemButtonsContainer.children("."+this.classes.uiButton).filter(":visible").length?parseInt(t("[data-separator-for=systemButtonsContainer]").css("borderTopWidth"),10)||0:0;e=this.$elem.find("."+this.classes.systemButtonsSeparator).filter(":visible"),o=e.length?this._extendedPosition.call(e,"offset").top:this.$elem.outerHeight()-c.position().top,a=u.length?this._extendedPosition.call(u,"offset").bottom:this._extendedPosition.call(this.$elem,"offset").top,r=c.hasClass(this.classes.windowButtonsContainerOnlyChild)?0:2*parseFloat(this._styleIndicator("$."+this.classes.windowButtonsContainer+" > div."+this.classes.windowButton,"paddingTop").paddingTop)-g}var f=this._cache.horizontal?i-s-2*n:"",_=((e&&e.length?e.position().top+e.outerHeight():this.$elem.innerWidth())-(u.length?u.position().top+u.outerHeight():this.$elem.outerHeight()+this.$elem.position().top)-2*parseFloat(d.paddingTop),this._cache.horizontal?this.$elem.innerHeight():o-a-r),b=this._cache.horizontal&&1===this.options.horizontalRows;this.options.windowButtonsSortable&&t.ui.sortable&&this.$windowButtonsContainer.sortable("option","axis",b?"x":!1),h&&--f,this.$windowButtonsContainer.css({width:f,height:_})},_setWindowButtonsSizes:function(){var e=this,i={},s=this.$elem.find("."+this.classes.windowButton);if(s.length){var n=s.filter(":eq(0)"),o=s.filter(":last"),a=parseFloat(window.getComputedStyle(n[0]).marginRight),r=(parseFloat(window.getComputedStyle(n[0]).marginBottom),n.outerWidth()-n.innerWidth());if(s.each(function(){var s=t(this);e._copyStyles({to:s,properties:["maxWidth","maxHeight","display"]}),i[this.id]=s.outerWidth()+a}),this._cache.horizontal){var l=0;if(o.offset().top>=this.$windowButtonsContainer.offset().top+this.$windowButtonsContainer.innerHeight()){t.each(i,function(t,e){l+=e});var h=Math.ceil(s.length/this._getRealRowCol("horizontal")),c=Math.floor(this.$windowButtonsContainer.innerWidth()/h-a-r);s.css("maxWidth",c),s=this.$windowButtonsContainer.children("."+this.classes.uiButton);var d=s.filter(":last");if(d.length){for(var u={},m=1;m<=this.options.horizontalRows;m++)u[m]=t();var p=this._extendedPosition.call(s.filter(":eq(0)"),"offset").top,g=1;s.each(function(){var i=t(this),s=e._extendedPosition.call(i,"offset").top;s-2>p&&g<e.options.horizontalRows&&(p=s,++g),u[g]=u[g].add(i)});var f=this._extendedPosition.call(d,"offset"),_=this._extendedPosition.call(this.$windowButtonsContainer,"offset");if(f.bottom>_.bottom+f.height/2)for(var b=u[this._getRealRowCol("horizontal")].filter(":not(:last)"),w=0;f.bottom>_.bottom+f.height/2&&(b.each(function(){this.style.maxWidth=""+(parseInt(this.style.maxWidth,10)-1)+"px"}),w++,50!==w);)f=this._extendedPosition.call(d,"offset")}}s.each(function(){t(this).data(e._cnst.dataPrefix+"taskbarButtonFloatWidth",window.getComputedStyle(this).width)})}this.options.windowButtonsSortable&&t.ui.sortable&&this.$windowButtonsContainer.sortable("refreshPositions")}},_connectElements:function(t,e){var i=t.uniqueId().attr("id"),s=e.uniqueId().attr("id");this._cache.connectedElements[i]=this._cache.connectedElements[i]||[],this._cache.connectedElements[i].push(s),this._cache.connectedElements[s]=this._cache.connectedElements[s]||[],this._cache.connectedElements[s].push(i)},connectedElement:function(e){var i,s=t();if(e instanceof t&&e.length&&e[0].id?i=e[0].id:e.nodeName?i=e.id:"string"==typeof e&&(i=e),!i)return s;var n=this._cache.connectedElements[i];if(!n||!n.length)return s;var o=t();return t.each(n,function(e,i){o=o.add(t("#"+i))}),o.length?o:s},_bindMenusAutoOpen:function(){var e=this,i=this.$elem.find("."+this.classes.uiButton),s=t().add(i.filter("[data-menu-button]")).add(i.filter("[data-group-name]")).add(this.$languageSelect).add(this.$clock);s.each(function(){var i=e.connectedElement(this);i.length&&e._bindMenuAutoOpen(t(this),i)})},_bindMenuAutoOpen:function(e,i){var s=this,n="mouseenter."+this._cache.uep+"menuautoopen";e.off(n),this.options.menuAutoOpenOnBrowse&&e.length&&i.length&&e.on(n,function(){return s._cache.progress.windowButtonsSortable||s._cache.progress.taskbarDraggable?!0:void(s._openedElements()&&!i.is(":visible")&&(s._cache.progress.menuAutoOpenOnBrowse=!0,s._cache.suppressSingleGroupClick=!0,t(this).trigger("click."+s._cache.uep),s._cache.suppressSingleGroupClick=!1))})},_stopOtherTaskbarsAutoOpenOnBrowse:function(){var e=this;t("."+this.classes.taskbar).not(this.$elem).each(function(){var i=t(this),s=i.data(e._cnst.dataPrefix+"taskbar");s.hideSubordinates(),s._openedElements(!1),s._cache.progress.menuAutoOpenOnBrowse=!1})},_setConnectedButtonState:function(e){var i=e.connectedElement(this);if(i.length){{var s=e.connectedElement(this),n=!1;e.classes.uiStateActive}t.each(s,function(){var s=t(this);return s.hasClass(e.classes.windowContent)?n=s.window("widget").hasClass(e.classes.windowTop):s.hasClass(e.classes.windowGroupMenu)?(i.each(function(){var i=t(this);return i.hasClass(e.classes.uiDialogContent)?i.window("widget").hasClass(e.classes.windowTop)?(n=!0,!1):void 0:i.is(":visible")?!1:!0}),n||(n=s.is(":visible"))):n=s.is(":visible"),n?!1:void 0}),t(this).toggleClass(e.classes.uiStateActive,n)}},_setConnectedButtonsStates:function(){var t=this;this.$systemButtonsContainer.add(this.$windowButtonsContainer).add(this.$buttonsContainer).children("."+this.classes.uiButton).each(function(){t._setConnectedButtonState.call(this,t)})},_clockUpdate:function(){var t=this.$elem.find("."+this.classes.clock);t.button("option","label",this._getFormattedTime()).attr("title",this._getFormattedDate())},_getFormattedDate:function(){var e="en"!==this.options.language?this.options.language:"";return t.datepicker?t.datepicker.regional[e]?t.datepicker.formatDate(this._i18n("clockDateFormat"),new Date,{dayNamesShort:t.datepicker.regional[e].dayNamesShort,dayNames:t.datepicker.regional[e].dayNames,monthNamesShort:t.datepicker.regional[e].monthNamesShort,monthNames:t.datepicker.regional[e].monthNames}):(this._debugLogAdd('Language "'+e+'" required for formatting date for clock tooltip, but datepicker translations were not found.',1,1),""):""},_getFormattedTime:function(e){var i=new Date,s=this._i18n("clockTimeFormat"),e=e||{hour:i.getHours(),minute:i.getMinutes(),second:i.getSeconds(),millisec:i.getMilliseconds(),timezone:i.getTimezoneOffset()},n=function(t){return t%=12,0===t&&(t=12),String(t)},o=s,a=this._i18n("clockAmSymbol"),r=parseInt(e.hour,10);return r>11&&(a=this._i18n("clockPmSymbol")),o=o.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(i){switch(i){case"HH":return("0"+r).slice(-2);case"H":return r;case"hh":return("0"+n(r)).slice(-2);case"h":return n(r);case"mm":return("0"+e.minute).slice(-2);case"m":return e.minute;case"ss":return("0"+e.second).slice(-2);case"s":return e.second;case"l":return("00"+e.millisec).slice(-3);case"c":return("00"+e.microsec).slice(-3);case"z":return t.timepicker.timezoneOffsetString(null===e.timezone?options.timezone:e.timezone,!1);case"Z":return t.timepicker.timezoneOffsetString(null===e.timezone?options.timezone:e.timezone,!0);case"T":return a.charAt(0).toUpperCase();case"TT":return a.toUpperCase();case"t":return a.charAt(0).toLowerCase();case"tt":return a.toLowerCase();default:return i.replace(/'/g,"")}})},_blurWindows:function(){t("."+this.classes.window+":eq(0) ."+this.classes.windowContent+":eq(0)").window("moveToTop",{skipThis:!0,skipMinimizing:!0,blurModals:!0})},_windows:function(){var e=t();return t.each(this._cache.windows,function(i){var s=t("#"+i);s.length&&(e=e.add(s))}),e},_datepickerSetPosition:function(){var t=this.$elem.find("."+this.classes.clock),e=this.$elem.find("."+this.classes.datepicker);if(t.length&&e.length){var i=this._menuPosition({of:t,elem:e});e.position(i)}},_parseDuration:function(i){return"number"==typeof i?i:i in t.fx.speeds?t.fx.speeds[i]:e},_initAutoHide:function(){var e=this.$elem,i=this,s=(this._cache,e.hasClass(i.classes.autoHideHidden));if(e.off("mouseenter."+this._cache.uep+"autohide mouseleave."+this._cache.uep+"autohide autohide."+this._cache.uep+"start autohide."+this._cache.uep+"restart").removeClass(this.classes.autoHide+" "+this.classes.autoHideHidden+" "+this.classes.autoHideHidding+" "+this.classes.autoHidePending+" "+this.classes.autoHideShowing),clearTimeout(i._cache.timeouts.autoHide),!this.options.autoHide)return void this.$elem.css(this._autoHideStopAndReturnDestination());e.addClass(this.classes.autoHide),e.on("autohide."+this._cache.uep+"restart",function(){var s=i.options.durations.autoHideDelay,n=i._parseDuration(s);"undefined"==typeof n&&(n=t.fx.speeds._default),clearTimeout(i._cache.timeouts.autoHide);var o=function(){e.trigger("autohide."+i._cache.uep+"restart")},a=function(){i._openedElements()||e.hasClass(i.classes.autoHideHidden)||e.hasClass(i.classes.autoHideHidding)||e.hasClass(i.classes.autoHideShowing)||e.hasClass(i.classes.autoHideMouseOver)||i._cache.progress.windowButtonsSortable||i._cache.progress.taskbarDraggable||i._cache.progress.taskbarResizable?s===!1?setTimeout(function(){o()},i._cnst.autoHideRestartDelay):o():e.trigger("autohide."+i._cache.uep+"start")};s===!1?a():i._cache.timeouts.autoHide=setTimeout(function(){a()},Math.max(i._cnst.autoHideRestartDelay,n))}),e.on("autohide."+this._cache.uep+"start",function(){i._startHidding()});var n=e.find("."+this.classes.uiResizableHandle);e.on("mouseenter."+this._cache.uep+"autohide",function(s){s.isTrigger&&t(s.target).is("."+i.classes.uiDatepickerDaysCellOver+" a")||(e.addClass(i.classes.autoHideMouseOver),(e.hasClass(i.classes.autoHidePending)||e.hasClass(i.classes.autoHideHidding))&&i._startShowing())}),e.on("mouseleave."+this._cache.uep+"autohide",function(){e.removeClass(i.classes.autoHideMouseOver),e.hasClass(i.classes.autoHideHidden)||e.addClass(i.classes.autoHidePending),e.trigger("autohide."+i._cache.uep+"restart")}),n.on("mouseenter."+this._cache.uep+"autohide",function(){if(!e.hasClass(i.classes.autoHideHidden))return!0;var s=t("."+i.classes.window+"."+i.classes.uiDraggableDragging),n=t("."+i.classes.window+"."+i.classes.uiResizableResizing);return s.length||n.length?!0:void i._startShowing()}),s?this._startHidding({duration:!1}):e.trigger("autohide."+this._cache.uep+"restart")},_startShowing:function(e){if((this.$elem.hasClass(this.classes.autoHideHidden)||this.$elem.hasClass(this.classes.autoHideHidding)||this._openedElements())&&!this.$elem.hasClass(this.classes.draggableDragging)&&!this.$elem.hasClass(this.classes.resizableResizing)&&!this.$elem.hasClass(this.classes.autoHideShowing)&&this.options.autoHide){var i=this,s=this._autoHideUi(!1,e);if(this._trigger("autoHideStart",{},s)===!1)return!1;this.$elem.removeClass(this.classes.autoHideHidden+" "+this.classes.autoHideHidding+" "+this.classes.autoHidePending),this.$elem.addClass(this.classes.autoHideShowing);var n=(this._cache,this._autoHideStopAndReturnDestination()),o=this._autoHideUi(!1,e),a=this._autoHideUi(!1,{quick:e&&e.duration===!1,trigger:e&&"api"===e.trigger?"api":"user"});e&&e.duration===!1||this.options.durations.autoHideShow===!1?(this.$elem.css(n).removeClass(this.classes.autoHideShowing),this._trigger("autoHideStop",{},o),this.$elem.trigger("autohide."+this._cache.uep+"restart")):this.$elem.animate(n,{duration:e?this._parseDuration(e.duration)||this.options.durations.autoHideShow:this.options.durations.autoHideShow,progress:function(){i._trigger("autoHideProgress",{},t.extend(!0,{},a))},complete:function(){i.$elem.removeClass(i.classes.autoHideShowing),i._trigger("autoHideStop",{},o),i.$elem.trigger("autohide."+i._cache.uep+"restart")}})}},_startHidding:function(e){if(!this.$elem.hasClass(this.classes.draggableDragging)&&!this.$elem.hasClass(this.classes.resizableResizing)){var i=this._autoHideUi(!0,e);if(this._trigger("autoHideStart",{},i)===!1)return!1;var s=this._autoHideUi(!0,e),n=(this._autoHideUi(!0,{quick:null,trigger:e&&"api"===e.trigger?"api":"user"}),this),o=n._cache,a=n.$elem;if(a.hasClass(this.classes.autoHideHidding)||a.hasClass(this.classes.draggableDragging))return!1;var r={};a.addClass(this.classes.autoHideHidding),a.removeClass(this.classes.autoHidePending),r[o.horizontal?o.stickVertical:o.stickHorizontal]=o.horizontal?-1*a.outerHeight():-1*a.outerWidth(),e&&e.duration===!1||this.options.durations.autoHideHide===!1?(a.css(r).removeClass(this.classes.autoHideHidding).addClass(this.classes.autoHideHidden),this._trigger("autoHideStop",{},s)):a.stop(!0,!1).animate(r,{duration:e?this._parseDuration(e.duration)||this.options.durations.autoHideHide:this.options.durations.autoHideHide,progress:function(){n._trigger("autoHideProgress",{},t.extend(!0,{},s))},complete:function(){a.removeClass(n.classes.autoHideHidding).addClass(n.classes.autoHideHidden),n._trigger("autoHideStop",{},s)}})}},_autoHideUi:function(t,e){var i={};return t?(i.hide=!0,i.show=!1):(i.hide=!1,i.show=!0),i.$handle=this.$elem.find("."+this.classes.resizable).find("."+this.classes.uiResizableHandle),e&&null!==e.quick&&(i.quick=e&&e.duration===!1),i.triggerApi=!(!e||!e.trigger||"api"!==e.trigger),i},_autoHideStopAndReturnDestination:function(){var t={};return t[this._cache.horizontal?this._cache.stickVertical:this._cache.stickHorizontal]=0,this.$elem.stop(!0,!1),t},_show:function(t){return this._startShowing({duration:t,trigger:"api"}),this},_hide:function(t){return this._startHidding({duration:t,trigger:"api"}),this},_openedElements:function(t){return"undefined"==typeof t?this._cache.openedElements:(this._cache.openedElements=t,t===!1?(this._cache.progress.menuAutoOpenOnBrowse=!1,this.$elem.trigger("autohide."+this._cache.uep+"restart")):this._startShowing({duration:!1}),void this.$elem.toggleClass(this.classes.taskbarWithOpenElements,t))},_factory:function(e,i){var s=this,n=function(){return t("<div></div>")},o={startButton:function(){var t=s._i18n("startButton:"+i.name),e=n().addClass(s.classes.startButton).text("undefined"!==t?t:i.name||i.text).attr("data-menu-button-for",i.name).attr("data-menu-button","true").button();return s._refreshButtonIcon.call(e,s),e},separator:function(){return n().addClass(s.classes.separator+" "+s.classes.uiWidgetContent)},widgetContent:function(){return n().addClass(s.classes.uiWidgetContent)},droppableContainer:function(){return n().addClass(s.classes.droppableContainer).attr("data-taskbar-uuid",s.uuid)},languageSelect:function(){return n().addClass(s.classes.languageSelect+" "+s.classes.taskbarIcon).attr("data-menu-button","true")},languageSelectMenu:function(){return t("<ul></div>").attr("data-menu-type","languageSelect")},windowGroupMenu:function(){return t("<ul></ul>").addClass(s.classes.windowGroupMenu)},windowGroupElement:function(){return t("<li></li>").addClass(s.classes.windowGroupElement).prepend(t("<a></a>").attr("href","#").append("taskbarPlaceholder"))},droppable:function(){return n().addClass(s.classes.droppable).attr("data-taskbar-uuid",s.uuid)}};return t.inArray(e,["container","datepicker","draggableHelper","resizable","windowButton","windowCopy","windowsContainment"])>-1?n().addClass(s.classes[e]):t.inArray(e,["clock","minimizeAll","networkMonitor","toggleFullscreen"])>-1?n().addClass(s.classes[e]+" "+s.classes.taskbarIcon):t.inArray(e,["buttonsContainer","startButtonsContainer","systemButtonsContainer","windowButtonsContainer"])>-1?n().addClass(s.classes[e]+" "+s.classes.taskbarContainter).attr("data-container-name",e):o[e]()},_bind:function(t){var e;try{e=t.window("taskbar")}catch(i){return!1}if(e[0]!==this.$elem[0])return!1;var s=t[0].id;this._cache.windows[s]=t;var n=t.window("option","group"),o={$elem:t,window:s};n?(this._cache.groups[n]||(this._cache.groups[n]=[],this._cache.windowButtons.push("group:"+n)),this._cache.groups[n].push(s),o.group=n):this._cache.windowButtons.push("window:"+s),this._appendWindowButton(o),this._cache.horizontal&&this._refreshWindowButtonsContainer(),this._setButtonsTooltips(),this._refreshSeparators();var a={$window:t};this._trigger("bind",{},a)},_unbind:function(t){this._windowButtonAction({$elem:t,action:"unbind"});var e={$window:t};this._trigger("unbind",{},e)},_button:function(t){return this._windowButtonAction({$elem:t,action:"get"})},_windowButtonAction:function(e){var i=e.$elem,s=!1;if("get"===e.action&&!(i instanceof t))return t();var n,o=(i.hasClass(this.classes.window)?i.find("."+this.classes.uiDialogContent):i)[0].id,a=this._cache.windowButtons,r=this._cache.groups,l=this;for(n in a)if(a.hasOwnProperty(n)&&a[n]==="window:"+o){var h=this.$elem.find("."+this.classes.windowButton+"[data-window-id="+o+"]");if("get"===e.action)return h;if("unbind"===e.action){l._removeWindowFromCache(o),h.remove(),a.splice(n,1),s=!0;break}}for(n in r)if(r.hasOwnProperty(n))for(var c in r[n])if(r[n].hasOwnProperty(c)&&r[n][c]===o){var d=this.$elem.find("."+this.classes.windowButton+"[data-group-name="+n+"]"),u=this.$elem.find("."+this.classes.uiMenu+"[data-group-name="+n+"]"),m=u.find("[data-window-id="+o+"]");if("get"===e.action)return d;if("unbind"===e.action){m.remove(),delete r[n][c],l._removeWindowFromCache(o);var p=!0;if(t.each(r[n],function(t,e){"string"==typeof e&&(p=!1)}),p){for(var g="group:"+n,f=0;f<a.length;f++)if(a[f]===g){a.splice(f,1);break}s=!0,u.menu("destroy").remove(),d.remove();break}u.menu("refresh"),this._groupSetTranslatedTitle.call(d,l),l._positionTaskbarWindowGroup({$group:d,$menu:u});break}}return"get"===e.action?t():void(s&&(this._setWindowButtonsSizes(),this._refreshSeparators()))},_removeWindowFromCache:function(t){delete this._cache.windows[t]},_appendWindowButton:function(e){var i,s,n,o=this,a=function(e){e.preventDefault();var i=t(this).attr("data-window-id"),s=t("#"+i);o._hideMenus(),o._hideTooltips(),s.window("show",e),o._openedElements(!1)};if(e.group){n=this.$windowButtonsContainer.find("."+this.classes.uiButton+"[data-group-name="+e.group+"]");var r;if(n.length)r=this.$windowButtonsContainer.find("."+this.classes.uiMenu+"[data-group-name="+e.group+"]");else{if(n=this._factory("windowButton").uniqueId().appendTo(this.$windowButtonsContainer).attr("data-group-name",e.group).button(),this._refreshGroupIcon.call(n,this),!this._debugMenu())return;r=this._factory("windowGroupMenu").attr("data-group-name",e.group).insertAfter(n).menu({focus:function(e,i){t(i.item).addClass(o.classes.windowGroupElementActive),o._triggerBindedElementEvent({type:"menuItemFocus",item:t(i.item),menu:r,button:n,event:e})},blur:function(e,i){t(this).children("."+o.classes.uiMenuItem).removeClass(o.classes.windowGroupElementActive),o._triggerBindedElementEvent({type:"menuItemBlur",item:t(i.item),menu:r,button:n,event:e})}}).hide(),this._connectElements(n,r),n.on("click."+this._cache.uep+" dblclick."+this._cache.uep,function(e){var i=r.find("."+o.classes.uiMenuItem);if(1===i.length&&!o._cache.suppressSingleGroupClick)return o._hideMenus(),o._hideTooltips(),i.trigger(e.type,e),!0;if(1===i.length&&o._cache.suppressSingleGroupClick)return!0;if(o._stopOtherTaskbarsAutoOpenOnBrowse(),"dblclick"===e.type)return!0;o._blurWindows(),o._hideMenus({not:r}),o._hideTooltips();var s=r.is(":visible");o._triggerBindedElementEvent({type:s?"elementClose":"elementOpen",menu:r,button:n})!==!1&&(t(this).addClass(o.classes.uiStateActive),r.toggle(),s?o._openedElements(!1):o._positionTaskbarWindowGroup({$group:n,$menu:r}),o._setConnectedButtonState.call(this,o))}),this._bindMenuAutoOpen(n,r),n.on("mouseup."+this._cache.uep+" mouseenter."+this._cache.uep+" mouseleave."+this._cache.uep,function(){o._setConnectedButtonState.call(this,o)})}s=n;var l=this._factory("windowGroupElement").attr("data-window-id",e.window).on("dblclick."+this._cache.uep+" click."+this._cache.uep,a);l.append(t("<div></div>").addClass(this.classes.menuWindowClose).text(this._i18n("close")).button({text:!1,icons:{primary:this.options.icons.menuWindowClose}}).on("click."+this._cache.uep,function(e){e.preventDefault();var i=t(this).closest("[data-window-id]").attr("data-window-id");t("#"+i).window("close"),o._openedElements(!1)})),l.appendTo(r),this._connectElements(e.$elem,s),r.menu("refresh"),this._refreshWindowButtonIcon.call(l,this),this._groupSetTranslatedTitle.call(n,o)}else s=this._factory("windowButton").appendTo(this.$windowButtonsContainer),i=e.$elem.window("option","title"),s.uniqueId().attr("data-window-id",e.window).on("click."+this._cache.uep+" dblclick."+this._cache.uep,a).button(),this._buttonSetTitle.call(s,i,this),this._connectElements(e.$elem,s),this._refreshwindowButtonsIcons();s!==n&&s.on("mouseup."+this._cache.uep+" mouseleave."+this._cache.uep,function(){o._setConnectedButtonState.call(this,o)})},_groupSetTranslatedTitle:function(e){var i=t(this).attr("data-group-name"),s=e.connectedElement(this).filter("."+e.classes.uiMenu).children().length,n=e._i18n("group:"+i),o=n!==e._cnst.missingTranslation,a=o?n:i,r=s>1?e._i18n("multipleWindowButton",{counter:s,title:a}):a;o||e._debugLogAdd('Missing translation for windows group named "'+i+'" in language "'+e.options.language+'".',1,1),t(this).attr("title",r).button("option","label",r)},_buttonSetTitle:function(e,i){var s=t(this);s.attr("title",e),s.hasClass(i.classes.uiButton)&&s.button("option","label",e)},_refreshGroupIcons:function(){var e=this;this.$elem.find("[data-group-name]."+this.classes.uiButton).each(function(){e._refreshGroupIcon.call(t(this),e)})},_refreshGroupIcon:function(e){var i=t(this),s=i.attr("data-group-name");i.button("option","icons.primary",e.options.icons["group:"+s]||null),i.button("option","text",e.options.windowButtonsIconsOnly?!1:!0)},_refreshButtonIcons:function(){var e=this;this.$elem.find("[data-button-name]."+this.classes.uiButton+",[data-menu-button]."+this.classes.uiButton).each(function(){e._refreshButtonIcon.call(t(this),e)})},_refreshButtonIcon:function(e){var i=t(this),s=i.attr("data-button-name"),n=null;if(t.inArray(s,e._systemButtonsWithSingleIcons)>-1)n=e.options.icons[s];else if("toggleFullscreen"===s)n=e.options.icons["toggleFullscreen"+(e._fullscreenEnabled()?"On":"Off")];else if("networkMonitor"===s)n=e.options.icons[e._getNetworkMonitorKey()];else if(i.hasClass(e.classes.startButton)&&i.hasClass(e.classes.uiButton))n=e.options.icons.startButton?e.options.icons.startButton:e.options.icons.startButtonSet?e.options.icons.startButtonSet+"-"+e._translatePosition():null;else try{n=e.options.buttons[s].icons.primary}catch(o){}i.button("option","icons.primary",n||null)},_refreshwindowButtonsIcons:function(){var e=this;this.$elem.find("[data-window-id]."+this.classes.uiButton).each(function(){e._refreshWindowButtonIcon.call(t(this),e)})},_refreshWindowButtonIcon:function(e){{var i,s,n=t(this),o=n.attr("data-window-id");n.attr("data-group-name")}if(n.is("."+e.classes.uiButton)){if(i=t("#"+o).window("option","icons.main"),s=t("#"+o).window("option","title"),!n.hasClass(e.classes.uiButton))return;n.button("option","icons.primary",e.options.windowButtonsIconsOnly?i||e.classes.uiIconBlank:i),n.button("option","text",e.options.windowButtonsIconsOnly?!1:!0)}else if(n.is("."+e.classes.uiMenuItem)){var a=t("#"+n.attr("data-window-id"));i=a.window("option","icons.main"),n.find("a").contents().filter(function(){return 3==this.nodeType}).first()[0].nodeValue=a.window("title"),n.children("span."+e.classes.uiIcon).remove(),n.prepend(t("<span></span>").addClass(e.classes.uiIcon+" "+(i?i:e.classes.uiIconBlank)))}},_setwindowButtonsIconsOnlyClass:function(){this.$elem.toggleClass(this.classes.windowButtonsIconsOnly,this.options.windowButtonsIconsOnly)},_createStyles:function(e){var i=e&&e.destroy,s=t('style[type="text/css"][data-taskbar-uuid="'+this.uuid+'"]');if(!i){var n=t("<style></style>").attr("type","text/css").attr("data-taskbar-uuid",this.uuid).appendTo("body"),o=this._styleIndicator("."+this.classes.uiStateDefault+" > ."+this.classes.uiIcon,"backgroundImage").backgroundImage,a="{background-image:"+o+";}",r="."+this.classes.window+'[data-taskbar-uuid="'+this.uuid+'"] .'+this.classes.uiDialogTitlebar+"."+this.classes.uiStateActive+":not(."+this.classes.uiStateDefault+") ."+this.classes.uiButton+" ."+this.classes.uiButtonIconPrimary+a,l="";t.ui.menu&&parseFloat(t.ui.menu.prototype.version)>=1.11&&(l="."+this.classes.taskbar+'[data-taskbar-uuid="'+this.uuid+'"] .'+this.classes.windowGroupElement+" ."+this.classes.uiButtonIconPrimary+":not(:hover)"+a);var h="",c=this,d=window.getComputedStyle(t("body")[0]),u=parseFloat,m={horizontal:Math.floor(u(d.marginLeft)+u(d.marginRight)),vertical:Math.floor(u(d.marginTop)+u(d.marginBottom))};t.each([!0,!1],function(e,i){h+="."+c.classes["resizeIframe"+(i?"Horizontal":"Vertical")]+"{",t.each(["-webkit-","-moz-",""],function(t,e){h+=(i?"width:":"height:")+e+"calc(100% - "+(i?m.horizontal:m.vertical)+"px);"}),h+="}"}),n.text(r+l+h)}s.remove()},_positionTaskbarWindowGroup:function(t){var e=this._menuPosition({of:t.$group,elem:t.$menu});t.$menu.position(e)},_createWindowsContainment:function(){this.$windowsContainment=t("div."+this.classes.windowsContainment),this.$windowCopy=t("div."+this.classes.windowCopy),this.$windowsContainment.length||(this.$windowsContainment=this._factory("windowsContainment").appendTo("body")),this.$windowCopy.length||(this.$windowCopy=this._factory("windowCopy").appendTo("body"));var e=this.$windowsContainment.data(this._cnst.dataPrefix+"taskbars")||0;this.$windowsContainment.data(this._cnst.dataPrefix+"taskbars",++e)},_destroyWindowsContainment:function(){var t=this.$windowsContainment.data(this._cnst.dataPrefix+"taskbars");this.$windowsContainment.data(this._cnst.dataPrefix+"taskbars",--t),0===t&&(this.$windowsContainment.remove(),this.$windowCopy.remove())},_getTaskbarList:function(){return{top:t("."+this.classes.taskbarHorizontal+"."+this.classes.taskbarStickTop+":not(."+this.classes.droppable+")"),left:t("."+this.classes.taskbarVertical+"."+this.classes.taskbarStickLeft+":not(."+this.classes.droppable+")"),right:t("."+this.classes.taskbarVertical+"."+this.classes.taskbarStickRight+":not(."+this.classes.droppable+")"),bottom:t("."+this.classes.taskbarHorizontal+"."+this.classes.taskbarStickBottom+":not(."+this.classes.droppable+")")}},_resizeWindowsContainment:function(){var t=this._getContainmentInner(),e=this._getMaxTaskbarsMargins();t.top=e.top,t.left=e.left,t.width-=e.x,t.height-=e.y,this.$windowsContainment.css(t).data(this._cnst.dataPrefix+"taskbar-margins",e),this.$windowCopy.css(this._getContainmentInner())},_getMaxTaskbarsMargins:function(){var e=this,i=this._getTaskbarList(),s=this._zeroDirections(),n=t.extend(!0,{},this.options.viewportMargins),o={};return t.each(i,function(i,n){var o=[];n=n.not("."+e.classes.autoHide),n.each(function(){var e=t.inArray(i,["top","bottom"])>-1,s=t(this);o.push(e?s.outerHeight():s.outerWidth())}),o.length&&(s[i]=Math.max.apply(null,o))}),o=this._viewportMarginsRecalculate(n,s)},_viewportMarginsRecalculate:function(e,i){var s,n={};return t.each(e,function(t,e){s="correct"===e[1]&&0!==i[t]||i[t]<e[0]&&0!==i[t]&&"correctDown"===e[1]||i[t]>e[0]&&"correctUp"===e[1],s=s&&"correctNone"!==e[1],n[t]=s?i[t]:e[0]}),n.y=n.top+n.bottom,n.x=n.left+n.right,n
},_trigger:function(e,i,s){return t.extend(s,{instance:this,$taskbar:this.$elem}),this._super(e,i,s)},_triggerInternal:function(t){"function"==typeof this._cache.internalCallbacks[t]&&(this._cache.internalCallbacks[t](),this._cache.internalCallbacks[t]=null)},_bindInternal:function(t,e){this._cache.internalCallbacks[t]=e},_triggerBindedElementEvent:function(t){var e={};return e.autoOpen=this._cache.progress.menuAutoOpenOnBrowse,("elementOpen"===t.type||"elementClose"===t.type)&&(e.$element=t.menu,e.$button=t.button,"elementClose"===t.type&&(e.closeByOpen=!!t.closeByOpen)),("menuItemFocus"===t.type||"menuItemBlur"===t.type)&&(e.$item=t.item,e.$button=t.button,e.$menu=t.menu),"menuItemFocus"===t.type&&(this._cache.lastMenuItemFocus=e.$item),"menuItemBlur"===t.type&&(e.$item=this._cache.lastMenuItemFocus),this._trigger(t.type,t.event,e)},_refreshWindowsPosition:function(e){var i=e&&e.own?this.windows():t("."+this.classes.window+" ."+this.classes.windowContent);if(t.simone.window){var s=t.simone.window.prototype;i=s._sortByZIndex.call({_cnst:{lowestPossibleZIndex:s._cnst.lowestPossibleZIndex}},i.parent(),"asc").children("."+this.classes.windowContent);var n={};e&&e.skipFitting&&(n.skipOnFit=!0),i.each(function(){t(this).window("refreshPosition",n)})}},_refreshWindowsTaskbarId:function(){var e=this;this.windows().each(function(){var i=t(this),s=i.data(e._cnst.dataPrefix+"window");i.add(s.overlay).attr("data-taskbar-uuid",this.uuid)})},_refreshOwnWindowsPosition:function(e){e||(e={}),this._refreshWindowsPosition(t.extend({own:!0},e))},_refreshWindowsContainment:function(e){var i=this;t.each(this._cache.windows,function(t,s){var n=s.data(i._cnst.dataPrefix+"window");n&&(n._setContainment(),e&&e.refreshPosition===!1||n.refreshPosition())})},_translatePosition:function(){var t=this._cache.horizontal?"top"===this._cache.stickVertical?"s":"n":"left"===this._cache.stickHorizontal?"e":"w";return t},_zeroDirections:function(){return{top:0,left:0,right:0,bottom:0}},_neighbouringEdges:function(){return{top:["left","right"],right:["top","bottom"],bottom:["right","left"],left:["bottom","top"]}},_levenshtein:function(t,e){if(t==e)return 0;var i=t.length,s=e.length;if(0===i)return 1*s;if(0===s)return 1*i;t=t.split(""),e=e.split("");var n,o,a,r,l,h,c=new Array(s+1),d=new Array(s+1);for(o=0;s>=o;o++)c[o]=1*o;for(n=0;i>n;n++){for(d[0]=c[0]+1,o=0;s>o;o++)a=c[o]+(t[n]==e[o]?0:1),r=c[o+1]+1,a>r&&(a=r),l=d[o]+1,a>l&&(a=l),d[o+1]=a;h=c,c=d,d=h}return a=c[s]},_versionOf:function(e,i,s){var n=(e?t.ui[e]:t.ui).version.split("."),o=s.split("."),a=[];return t.each(o,function(t,e){var s=parseInt(e,10),o=parseInt(n[t],10);a.push(">="===i?o>=s:"=="===i||"==="===i?o===s:"<="===i?s>=o:!1)}),-1===t.inArray(!1,a)},_taskbarInstance:function(t){var e=t.closest("."+this.classes.taskbar);return e.data(this._cnst.dataPrefix+"taskbar")},_extendedPosition:function(e){if(!this)return{};var i=t(this);if(!i.length)return{};var s=e&&(e.offset||"offset"===e)?i.offset():i.position();return s.height=i.outerHeight(),s.width=i.outerWidth(),s.bottom=s.height+s.top,s.right=s.width+s.left,s},_isRealObject:function(t){return"object"==typeof t&&null!==t},_isRealEmptyObject:function(e){return(t.isEmptyObject(e)||1===e.length&&e.__proto__)&&this._isRealObject(e)},_styleIndicator:function(e,i){e=e.split(" > ");var s,n,o,a,r=[],l={};t.each(e,function(t,i){var l="div",h=i.indexOf("$");0===h&&(o=!0,i=i.substr(1));var c=i.indexOf(".");-1!==c&&(l=i.substr(0,c)||l,i=i.substr(c+1));var d=document.createElement(l);d.className=i,r[t]=d,0===t?(n=d,document.body.appendChild(d)):r[t-1].appendChild(d),a||!o&&t!==e.length-1||(s=d,a=!0)});var h=window.getComputedStyle(s);"borderColor"===i&&(i=["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"]),"string"==typeof i&&(i=[i]);for(var c in i)l[i[c]]=h[i[c]];return"undefined"==typeof i&&(l=h),document.body.removeChild(n),l},_extractObjectsByKey:function(e,i){var s={};return t.each(i,function(t,i){e[i]&&(s[i]=e[i])}),s},_fullscreenAvailable:function(){var t=document.documentElement;return!!(t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen||t.msRequestFullscreen)},_fullscreenEnabled:function(){var t=document.fullscreenEnabled||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return!!t},_fullscreenEnter:function(){var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},_fullscreenLeave:function(){document.exitFullscreen?document.exitFullscreen():document.mozExitFullScreen?document.mozExitFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},_resizeEvent:function(t){var e=this;clearTimeout(this._cache.timeouts.windowResize),this._cache.timeouts.windowResize=setTimeout(function(){e._resizeEventDelayed(t)},this._cnst.resizeDelay)},_resizeEventDelayed:function(e){var i=this,s=this._cache.resizeContainment,n=this._getContainment();(s&&(s.width!==n.width||s.height!==n.height)||e===!0)&&(i._cache.resizeContainment=n,i._cache.resizeCausesRefresh=!0,t(window).trigger("resize",{caller:"taskbar-iframe"}),i._cache.resizeCausesRefresh=!1)},_resizeIframeListener:function(){if(!t("."+this.classes.resizeIframeHorizontal).length){var e=this;e._cache.resizeContainment=e._getContainment(),t.each([!0,!1],function(i,s){var n=t("<iframe></iframe>").prependTo("body").addClass(e.classes.resizeIframe+" "+e.classes["resizeIframe"+(s?"Horizontal":"Vertical")]);n[0].contentWindow.addEventListener("resize",function(){e._resizeEvent()}),window.navigator.userAgent.match(/Trident/)&&e._bindInternal("afterRefresh",function(){e._resizeEvent(!0)})})}},_MutationObserver:function(){for(var t=["","WebKit","Moz","O","Ms"],e=0;e<t.length;e++)if(t[e]+"MutationObserver"in window)return window[t[e]+"MutationObserver"];return!1},_disconnectObservers:function(t){for(var e in this._cache.mutationObservers[t])this._cache.mutationObservers[t][e].disconnect();this._cache.mutationObservers[t]=[]},_getWindowScroll:function(){return{x:t(window).scrollLeft(),y:t(window).scrollTop()}},_copyStyles:function(e){var i="string"==typeof e.from;if("string"==typeof e.properties&&(e.properties=[e.properties]),i)var s=this._styleIndicator(e.from,e.properties);t.each(e.properties,function(t,n){i?e.to.css(n,s[n]):e.from?e.to.css(n,e.from.css(n)):e.to.css(n,"")})},_destroyMenus:function(e){var i=this;this.$elem.find(e).each(function(){var e=t(this);e.hasClass(i.classes.uiMenu)&&e.menu("destroy"),i._copyStyles({to:e,properties:["display","top","left"]})})},blurWindows:function(){this._blurWindows()},button:function(t){return this._button(t)},hide:function(t){this._hide(t)},hideSubordinates:function(){this._hideAll({blurWindows:!1})},i18n:function(t,e,i){return this._i18n(t,e,i)},minimizeAll:function(){this._minimizeAll()},refresh:function(){(this._cache.suppressEvents!==!1||this._trigger("beforeRefresh")!==!1)&&(this.hideSubordinates(),this._initialize(),this._triggerInternal("afterRefresh"),this._cache.suppressEvents===!1&&this._trigger("refresh"))},show:function(t){this._show(t)},windows:function(){return this._windows()},widget:function(){return this.$elem},enable:function(){this._debugLogAdd('Method "enable" is not implemented.',1,2)},disable:function(){this._debugLogAdd('Method "disabled" is not implemented.',1,2)},_checkForInvalidOptions:function(e,i,s){var n="object"==typeof e?e:t.simone.taskbar.prototype.options,o=Object.keys(n);if(!("string"==typeof i&&t.inArray(o,i)>-1)){var a;a="object"==typeof i?Object.keys(i):[i];var r=[];t.each(o,function(t,e){r[t]=e.toLowerCase()});var l=a.filter(function(t){return-1===r.indexOf(t.toLowerCase())});if(l.length){var h=[],c=[],d=this;t.each(l,function(e,i){h[e]={},t.each(o,function(t,s){h[e][s]=d._levenshtein(s,i),c[e]=i})});var u=100;t.each(h,function(e,i){var n,o=[];if(t.each(i,function(e,i){var s='"'+e+'"';u>i&&(u=i,o=[s]),i===u&&-1===t.inArray(s,o)&&o.push(s)}),o.length)if(o.length>1){var a=o.pop();n=o.join(", "),n+=", or "+a}else n=o[0];d._debugLogAdd('Unkown option or event "'+c[e]+'"'+(s?" set on initialization.":".")+(o.length?" Did you mean "+n+"?":""),1,2)})}}},_beforeSetOption:function(t){this._cache.optionSetter.previousValue=this.options[t]},_afterSetOption:function(t,e){var i=this._cache.optionSetter.previousValue,s={};"language"===t&&e!==i&&(s.originalLanguage=i,s.language=e,this._trigger("languageChange",{},s))},_setOption:function(t,i){this._checkForInvalidOptions(e,t),this._beforeSetOption(t),this._superApply(arguments),this._debugOptions(),"draggable"===t||"draggableBetweenEdges"===t||"dropOnExisting"===t?(this._setDraggable(),this._setDroppable()):"windowButtonsSortable"===t?this._setSortableWindowButtons():"language"===t||"fallbackLanguage"===t||"languages"===t||"localization"===t?(this._debugLocalization(),this._languageChange(),this._refresh()):"icons"===t?(this._refreshGroupIcons(),this._refreshButtonIcons(),this._setClockWidth()):"windowButtonsIconsOnly"===t?(this._setwindowButtonsIconsOnlyClass(),this._refreshGroupIcons(),this._refreshwindowButtonsIcons()):"buttonsTooltips"===t?this._setButtonsTooltips():"windowsContainment"===t?(this._refreshWindowsContainment(),this._refreshOwnWindowsPosition()):"orientation"===t||"horizontalWidth"===t||"horizontalStick"===t||"horizontalRows"===t||"horizontalRowHeight"===t||"horizontalRowsMin"===t||"horizontalRowsMax"===t||"verticalHeight"===t||"verticalStick"===t||"verticalColumns"===t||"verticalColumnWidth"===t||"verticalColumnsMin"===t||"verticalColumnsMax"===t||"viewportMargins"===t?this._refresh():"windowsInitialZIndex"===t?this._refreshWindowsPosition():"languageSelect"===t||"minimizeAll"===t||"toggleFullscreen"===t||"clock"===t||"networkMonitor"===t||"clockShowDatepicker"===t||"systemButtonsOrder"===t?this._buildSystemButtons():"menuAutoOpenOnBrowse"===t?this._bindMenusAutoOpen():"minimizeAllHoverOpaqueWindows"===t?this._setMinimizeAllHoverOpaqueWindows():"buttons"===t?(this._refresh(),this._refreshButtonIcons(),this._refreshWindowButtonsContainer()):"buttonsOrder"===t?(this._rebuildTaskbarButtons(),this._refreshWindowButtonsContainer()):"startButtons"===t?(this._rebuildTaskbarStartButtons(),this._refreshWindowButtonsContainer()):"resizable"===t||"resizableHandleOverflow"===t?this._setResizable():"resolveCollisions"===t?this._refresh():"autoHide"===t?this._refresh():"durations"===t&&this._setButtonsTooltips(),this._afterSetOption(t,i)},_destroy:function(){var e={destroy:!0},i=this,s={$windows:this.windows()};this._trigger("beforeDestroy",{},s);var n=this.windows();n.length&&this._debugLogAdd('Windows were binbed upon calling "destroy".',1,0)!==!1&&this.options.debug.environment&&window.console&&console.log(n),this._buildTaskbarContent(e),this.options.draggable=!1,this._setDraggable(),this._setDroppable(),this.options.resizable=!1,this._setResizable(e),this.options.autoHide=!1,this._initAutoHide(),this._createStyles(e),this.$elem.removeUniqueId().removeClass(this.classes.taskbar+" "+this.classes.empty+" "+this.classes.uiWidgetContent).removeAttr("data-taskbar-uuid").removeData(this._cnst.dataPrefix+"taskbarNewWindowsCount").removeData(this._cnst.dataPrefix+"taskbar").removeData(this._cnst.dataPrefix+"taskbarEdge").attr("style",this._cache.inlineCSS),0===t("."+this.classes.taskbar).length&&t("."+this.classes.resizeIframe).remove(),clearInterval(this._cache.timeouts.autoHide),clearInterval(this._cache.timeouts.windowResize),this._destroyMenus("[data-menu-type=start]"),this._removeTaskbarPositionClasses(),this._refreshNeighbours(),t("."+this.classes.taskbar).each(function(){var e=t(this).data(i._cnst.dataPrefix+"taskbar");e._refreshWindowsContainment()}),this._destroyWindowsContainment(),t(window).add(t(document)).off("."+this._cache.uep),t.each(["class","style"],function(t,e){""===i.$elem.attr(e)&&i.$elem.removeAttr(e)})}}),t.simone.taskbarSetup=function(e,i){i=1===arguments.length?e:i,e===!0&&arguments.length>1&&t("."+t.simone.taskbar.prototype.classes.taskbar).taskbar("option",i);var s=t.simone.taskbar.prototype.options;return i?t.extend(!0,s,i):s}}(jQuery);/*!
 * Simone - window widget, JavaScript
 *
 * Copyright 2014 Cezary KluczyÅ„ski and other authors
 * Version: 0.1.9
 * Released under the MIT license.
 *
 * http://cezarykluczynski.github.io/simone/docs/index.html
 * http://cezarykluczynski.github.io/simone/docs/window.html
 */!function(i,t){"use strict";i.widget("simone.window",i.ui.dialog,{version:"0.1.9",options:{appendTo:"body",autoOpen:!1,buttons:[],closable:!0,closeOnEscape:!1,closeText:!1,confirmClose:{confirm:!1,modal:!1,minimizable:!0,no:null,noLocalized:"confirmCloseNo",text:null,textLocalized:"confirmCloseText",title:null,titleLocalized:"confirmCloseTitle",yes:null,yesLocalized:"confirmCloseYes"},containment:"inherit",dialogClass:"",draggable:!0,durations:{maximize:"default",minimize:"default",restore:"default",show:"default"},embeddedContent:!1,group:null,height:"auto",hide:!1,icons:{close:"ui-icon-closethick",confirmClose:"ui-icon-help",main:null,maximize:"ui-icon-arrow-4-diag",minimize:"ui-icon-minusthick",restore:"ui-icon-newwin"},maxHeight:null,maximizable:!0,maximizedDraggable:!0,maxWidth:null,minHeight:150,minimizable:!0,minWidth:150,modal:!1,modalOverlay:"all",position:{my:"center",at:"center",of:window,collision:"fit"},resizable:!0,taskbar:".simone-taskbar:eq(0)",title:null,titleLocalized:null,widgetClass:"",width:300,beforeClose:null,close:null,create:null,dragStart:null,drag:null,dragStop:null,focus:null,beforeMaximize:null,maximize:null,beforeMinimize:null,minimize:null,modalOverlaySetsCreated:null,moveToBackground:null,moveToTop:null,open:null,resizeStart:null,resize:null,resizeStop:null,beforeRestore:null,restore:null,beforeShow:null,show:null,taskbarNotFound:null},_cnst:{dataPrefix:"simone-",eventPrefix:"simonewindow",lowestPossibleZIndex:-2147483648,dimensions:["width","height"]},_titlebarButtons:["close","minimize","maximize"],_unsupportedOptions:["autoOpen","closeText","hide"],classes:{buttonMinimize:"simone-window-button-minimize",buttonMaximize:"simone-window-button-maximize-restore",windowMaximized:"simone-window-maximized",windowMinimized:"simone-window-minimized",windowMinimizing:"simone-window-minimizing",windowMaximizing:"simone-window-maximizing",windowRestoring:"simone-window-restoring",windowShowing:"simone-window-showing",taskbarButtonActive:"simone-taskbar-button-state-active",taskbarWindowCopy:"simone-taskbar-window-copy",taskbarWindowsContainment:"simone-taskbar-windows-containment",taskbarWindowButton:"simone-taskbar-window-button",taskbarHorizontal:"simone-taskbar-horizontal",window:"simone-window",unminimizable:"simone-window-unminimizable",unmaximizable:"simone-window-unmaximizable",hidden:"simone-hidden",icon:"simone-window-icon",taskbar:"simone-taskbar",coveredByOverlay:"simone-covered-by-overlay-",notCoveredByOverlay:"simone-not-covered-by-overlay-",windowContent:"simone-window-content",windowTop:"simone-window-top",button:"simone-window-button",modal:"simone-window-modal",titlebarIcon:"simone-window-titlebar-icon",dialogOverlay:"simone-window-dialog-overlay",windowOverlay:"simone-window-overlay",contentOverlay:"simone-window-content-overlay",contentOverlayed:"simone-window-content-overlayed",titlebarButtonIcon:"simone-window-titlebar-button-icon",bodyOverlay:"simone-window-body-overlay",bodyOverlayed:"simone-window-body-overlayed",confirmClose:"simone-window-type-confirm-close",confirmCloseText:"simone-window-type-confirm-close-text",confirmCloseYes:"simone-window-type-confirm-close-yes",confirmCloseNo:"simone-window-type-confirm-close-no",confirmCloseButtons:"simone-window-type-confirm-close-buttons",uiStateActive:"ui-state-active",uiStateHover:"ui-state-hover",uiStateDisabled:"ui-state-disabled",uiDialogTitle:"ui-dialog-title",uiDialogContent:"ui-dialog-content",uiDialogResizing:"ui-dialog-resizing",uiResizable:"ui-resizable",uiResizableHandle:"ui-resizable-handle",uiDraggable:"ui-draggable",uiButton:"ui-button",uiMenu:"ui-menu",uiIcon:"ui-icon",uiDialogDragging:"ui-dialog-dragging",uiDialogTitlebar:"ui-dialog-titlebar",uiDialogButtonpane:"ui-dialog-buttonpane",uiDialogButtons:"ui-dialog-buttons",uiWidgetOverlay:"ui-widget-overlay",uiButtonIconPrimary:"ui-button-icon-primary",uiButtonText:"ui-button-text"},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this._cache={inlineCSS:this.element.attr("style")||"",title:"",realTitle:this.options.title,maximized:!1,minimized:!1,restored:!0,shown:!0,maximizing:!1,restoring:!1,minimizing:!1,confirmCloseMinimizing:!1,showing:!1,initialized:!1,modalOverlayZIndex:0,animationProgress:100,suppressEvents:!1,sizes:{},closeForced:!1,closeInevitable:!1,destroyed:!1,progress:{close:!1,interaction:!1,refreshPosition:!1,restoreMaximizedDraggable:!1},refreshPositionContainment:null,timeouts:{closeWindowShow:0},taskbarsOnClickPrevention:0,resizable:{hasScrollX:!1,hasScrollY:!1,hasInlineCSS:!1,hasInlineCSSX:!1,hasInlineCSSY:!1,inlineCSS:"",inlineCSSX:"",inlineCSSY:""},draggable:{scrollX:0,scrollY:0},onInteractionEnd:[],internalCallbacks:{},newWindowNumber:!1,uep:this._cnst.eventPrefix+this.uuid},this.element.uniqueId(),this._refreshTaskbar(),this.$window=this.element,this.$close=i(),this.$confirmCloseWindow=i(),this.$maximize=i(),this.$minimize=i(),this.$latestResizableHandle=i(),this._cacheTitle(this.options.title),this._createTitleForEmpty(),this._title(),this._validateTaskbar({initial:!0}),this._debugUnsupportedOptions(),this._resetUnsupportedOptions(),this._super(),"undefined"==typeof this.options.title&&(this.options.title=null),this.$elem=i(this.bindings[0]),this.$elem.uniqueId().addClass(this.classes.window).css("position","fixed"),this.$window.addClass(this.classes.windowContent),this._debugOptions(),this.$close=this.uiDialogTitlebarClose,this.$title=this.uiDialogTitlebar.find("."+this.classes.uiDialogTitle),this._bindTaskbar(this.$taskbar),this._setTitle(),this._checkForInvalidOptions(i.simone.window.prototype.options,this.options,!0),this._setIcon({button:"close"}),this.$window.data(this._cnst.dataPrefix+"window",this)},_init:function(){var i=this;this.options.hide=!1,this.open(),this.overlay&&(this.overlay.css("zIndex",""),this.moveToTop(null,!0)),this._setWindowIcon(),this._fixTitlebarTitleWidth(),this._fullPxPosition(),this._setWidth(),this._setHeight(),this._setRestoreSize(),this.refreshPosition({skipOnFit:!0}),this._setRestoreSize(),this.$window.css({minWidth:"",minHeight:""}),this._setMinimizableMaximizableClasses(),this._fullPxPosition(),this.$elem.on("scroll."+this._cache.uep,function(){i.$elem.scrollTop(0)}),this.$elem.on("mousedown."+this._cache.uep,function(){i._preventGlobalWindowClick()}),this.$elem.on("mouseup."+this._cache.uep,function(){i._delay(function(){i._revertGlobalWindowClick()})}),this._cache.initialized=!0,this._triggerInternal("afterTaskbarBind"),this._preventGlobalWindowClick(),this._delay(function(){i._revertGlobalWindowClick()}),this._cache.destroyed||this._trigger("create")},_rebindTaskbar:function(){return this._refreshTaskbar(),this._validateTaskbar({rebind:!0})===!1?void this._triggerInternal("afterTaskbarBind"):(this._bindTaskbar(this.$taskbar),this._setConnectedButtonTitle(),this._setConnectedButtonState(),void this._languageChange())},_bindTaskbar:function(){var i=this._getTaskbarInstance();i&&(i._bind(this.$window),this.$elem.add(this.overlay).attr("data-taskbar-uuid",this._getTaskbarInstance().uuid))},_taskbarUnbind:function(){var i=this._getTaskbarInstance();i&&i._unbind(this.$window),this.$elem.removeAttr("data-taskbar-uuid")},_refreshTaskbar:function(){this.$taskbar=this.options.taskbar instanceof i?this.options.taskbar:i(this.options.taskbar),this.$taskbar=this.$taskbar.filter(":eq(0)")},_getTaskbarInstance:function(){return this._validateTaskbar(),this.$taskbar.data(this._cnst.dataPrefix+"taskbar")},_hasTaskbar:function(){var i=this._taskbarStatus(),t=!i.isEmptyDomObject&&i.isTaskbar;return t},_taskbarStatus:function(){return{isEmptyDomObject:this.$taskbar instanceof i&&!this.$taskbar.length,isTaskbar:this.$taskbar.hasClass(this.classes.taskbar),isPlugin:!!i.simone.taskbar}},_validateTaskbar:function(i){var t=this._taskbarStatus();if(t.isEmptyDomObject||!t.isTaskbar||!t.isPlugin){var e={taskbar:this.options.taskbar,$taskbar:this.$taskbar},s={isEmptyDomObject:'jQuery object passed in "taskbar" option is empty.',isTaskbar:'jQuery object passed in "taskbar" option is not an instance of taskbar, call $("#selector").taskbar(); first.',isPlugin:"Taskbar plugin is missing."};if(i&&(i.initial||i.rebind)){for(var n in t)if(t[n]===!0&&"isEmptyDomObject"===n||t[n]===!1&&"isEmptyDomObject"!==n){e.message="Window #"+this.element[0].id+": "+s[n]+(i.rebind?" Window was not rebinded.":" Window was not created."),e.initial=!i.rebind;break}var o=this._trigger("taskbarNotFound",{},e),a=this;this._bindInternal("afterTaskbarBind",function(){i.initial&&a.destroy(),o!==!1&&(i.rebind?console&&console.warn?console.warn(e.message):null:console&&console.error?console.error(e.message):null)})}return!1}return!0},_refreshGroup:function(){this._taskbarUnbind(),this._bindTaskbar()},_debugOptions:function(){var i=this._getTaskbarInstance();if(i){var t=this.options;t.minWidth>t.maxWidth&&null!==t.minWidth&&null!==t.maxWidth&&this._debugLogAdd('"minWidth" option should not be higher than "maxWidth" option.',1,2),t.minHeight>t.maxHeight&&null!==t.minHeight&&null!==t.maxHeight&&this._debugLogAdd('"minHeight" option should not be higher than "maxHeight" option.',1,2),"function"!=typeof t.show&&null!==t.show&&this._debugLogAdd('option "show" should either be a function or null.',1,2)}},_debugUnsupportedOptions:function(){var t=this._getTaskbarInstance();if(t){var e=this;i.each(this._unsupportedOptions,function(i,t){if(e.options[t]!==!1){var s='"'+t+'" option is not supported and will be set to false.';"closeText"===i&&(s+=" Use built in localization instead."),e._debugLogAdd(s,1,2)}})}},_resetUnsupportedOptions:function(){this.options.autoOpen=!1,this.options.closeText=!1,this.options.hide=!1},_triggerInternal:function(i){"function"==typeof this._cache.internalCallbacks[i]&&(this._cache.internalCallbacks[i](),this._cache.internalCallbacks[i]=null)},_bindInternal:function(i,t){this._cache.internalCallbacks[i]=t},_createWrapper:function(){var t=this;this._super(),this.uiDialog.addClass(this.options.widgetClass),this.uiDialog.on("keydown."+this._cache.uep,function(e){!t.options.closable&&t.options.closeOnEscape&&e.keyCode===i.ui.keyCode.ESCAPE&&e.preventDefault()}),this._off(this.uiDialog,"mousedown"),this.uiDialog.on("mousedown."+this._cache.uep,function(i){(1===i.which||2===i.which)&&t._moveToTop(i)&&t._focusTabbable()});var e=i._data(this.uiDialog[0]).events.keydown;i.each(e,function(i,s){return"number"==typeof i&&e.hasOwnProperty(i)&&-1!==s.namespace.indexOf(t._cache.uep)?(e[i]=[e[0],e[0]=e[i]][0],!1):void 0})},_freezeBodyScrollbars:function(){var t=i("body"),e=document.documentElement,s=this._cache;s.resizable.hasScrollX=e.scrollWidth!==e.clientWidth,s.resizable.hasScrollY=e.scrollHeight!==e.clientHeight,s.resizable.hasInlineCSS=this._hasInlineProperty(t,"overflow"),s.resizable.hasInlineCSSX=this._hasInlineProperty(t,"overflow-y"),s.resizable.hasInlineCSSY=this._hasInlineProperty(t,"overflow-x"),s.inlineCSS=t.css("overflow"),s.inlineCSSX=t.css("overflow-x"),s.inlineCSSY=t.css("overflow-y");var n=s.resizable;t.css({overflow:"inherit",overflowY:n.hasScrollY?"scroll":"hidden",overflowX:n.hasScrollX?"scroll":"hidden"})},_revertBodyScrollbars:function(){var t=this._cache.resizable,e=i("body");e.css({overflow:t.hasInlineCSS?t.inlineCSS:"",overflowX:t.hasInlineCSSX?t.inlineCSSX:"",overflowY:t.hasInlineCSSY?t.inlineCSSY:""})},_makeResizable:function(){function t(i){return{originalPosition:i.originalPosition,originalSize:i.originalSize,position:i.position,size:i.size}}var e,s,n=this,o=(this.uiDialog,this.options),a=o.resizable,r="string"==typeof a?a:"n,e,s,w,se,sw,ne,nw",l={},h=function(t,e){var s=i(this);i.each(["width","height"],function(i,t){e.size[t]=Math.round(e.size[t]),s.css(t,e.size[t])}),i.each(["top","left"],function(i,t){e.position[t]=Math.round(e.position[t]),s.css(t,e.position[t])});var o=n._getDimensions.call(s,{outer:!0}),a=n._cache.sizes.containment,r=n._getDimensions.call(i("."+n.classes.taskbarWindowCopy),{outer:!0}),l=n._cache.sizes.margins,h=n._getTaskbarInstance();if(h)var c=n._getDimensions.call(h.$windowsContainment,{outer:!0});i.each(["top","left"],function(t,h){var d,m=i(window)["scroll"+n._ucFirst(h)](),u="top"===h,_=e.position[h]+m,f=_,g=u?"height":"width",w=u?"bottom":"right",p=o[h]+o[g]-m-r[g]+l[w],b=e.size[g];if(s.css(h,_),_<a[h]+m&&(p=a[h]+m-_),_=Math.round(Math.max(_,m+a[h])),d=_-f,0!==d&&(s.css(h,_),e.position[h]=_),b=a[g]-Math.max(_-a[h],0)-(a[w]-o[w]),b+=m,b=Math.round(b-Math.max(p,0))+d,s.css(g,b),c){var v=s["outer"+n._ucFirst(g)](),C=Math.min(0,c[w]-(v+_));b+=C}s.css(g,b),e.size[g]=b})},c=function(t,e){var s=i(this),o=n._bringIntoView({diffs:!0});i.each(["top","left"],function(t,a){var r=i(window)["scroll"+n._ucFirst(a)](),l="top"===a,h=e.position[a]+r,c=l?"height":"width",d=l?"bottom":"right",m=e.position[a]>e.originalPosition[a]?"less":"more",u=e.size[c];s.css(a,h);var _=!1;o[a]+r<0&&"more"===m&&(_=!0,h-=o[a]+r,u+=o[a]+r),o[d]<0&&"less"===m&&(_=!0,h+=o[d],u-=o[d]),_&&(h=Math.round(h),u=Math.round(u),s.css(a,h).css(c,u),e.position[a]=h,e.size[c]=u)})},d=function(i,t,e){n._versionOf("resizable",">=","1.11.1")&&e._mouseDrag(i),"viewport"===n._getRealContainment()?h.call(this,i,t):c.call(this,i,t)};this.uiDialog.resizable({cancel:"."+this.classes.uiDialogContent,alsoResize:null,aspectRatio:!1,maxWidth:o.maxWidth,maxHeight:o.maxHeight,minWidth:o.minWidth,minHeight:this._minHeight(),handles:r,start:function(e,o){n._interactionInProgress(!0),n._hideTaskbarsSubordinates(),n._freezeBodyScrollbars(),n._versionOf("dialog",">=","1.10.1")&&n._blockFrames(),l=n._getDimensions.call(n.$elem,{outer:!0});var a=i(this);s=a.data(n.classes.uiResizable),a.addClass(n.classes.uiDialogResizing);var r=n._getWindowScroll(),h=Math.round(parseFloat(a.css("top")))+r.y,c=Math.round(parseFloat(a.css("left")))+r.x;a.css({top:h,left:c,position:"absolute"}),n._trigger("resizeStart",e,t(o))},stop:function(e,a){var r=i(this);o.height=r.height(),o.width=r.width(),r.removeClass(n.classes.uiDialogResizing),n._versionOf("resizable",">=","1.11.1")&&d.call(this,e,a,s);var l=n._getWindowScroll(),h=Math.round(parseFloat(r.css("top")))-l.y,c=Math.round(parseFloat(r.css("left")))-l.x;r.css({top:h,left:c,position:"fixed"}),n._interactionInProgress(!1),n._revertBodyScrollbars(),n._versionOf("dialog",">=","1.10.1")&&n._unblockFrames(),n._fullPxPosition(),n._refreshPositionOption(),n._setRestoreSize(),n._setContainment(),n._trigger("resizeStop",e,t(a))},resize:function(i,e){d.call(this,i,e,s),n._fixTitlebarTitleWidth(),n._fullPxPosition(),n._setContentHeight(),n._trigger("resize",i,t(e))}}),e=this.uiDialog.data(this.classes.uiResizable),e._updateRatio=function(i){return i},i(this.bindings[0]).children("."+this.classes.uiResizableHandle).on("mousedown."+this._cache.uep,function(){n.$latestResizableHandle=i(this)})},_freezeBodyScrolls:function(){this._cache.draggable.scrollX=i(window).scrollLeft(),this._cache.draggable.scrollY=i(window).scrollTop()},_revertBodyScrolls:function(){window.scroll(this._cache.draggable.scrollX,this._cache.draggable.scrollY)},_refreshPositionOption:function(){var t=this.options,e=this.$elem;if(t.position=[parseInt(e.css("top"),10)-i(window).scrollLeft(),parseInt(e.css("left"),10)-i(window).scrollTop()],this._versionOf("dialog",">=","1.11.0")){var s=t.position[1]-i(window).scrollLeft(),n=t.position[0]-i(window).scrollTop();t.position={my:"left top",at:"left"+(s>=0?"+":"")+s+" top"+(n>=0?"+":"")+n,of:window}}},_makeDraggable:function(){function t(t,e){n._cache.progress.restoreMaximizedDraggable=!0;{var s=o.data(n.classes.uiDraggable),a=n._getTaskbarInstance(),r=n.uiDialogTitlebar.find("."+n.classes.uiDialogTitle),l=r.siblings("."+n.classes.uiButton+":visible:eq(0)");i.extend(!0,{},s)}n.restore(!1),s._mouseStop(t);var h=a._extendedPosition.call(o,"offset"),c=a._extendedPosition.call(r,"offset"),d=a._extendedPosition.call(l.length?l:r,"offset"),m={},u=n._getWindowScroll(),_=parseFloat(o.css("top"))-(h.top-e.originalPosition.top)+u.y;m.left=t.pageX-d.right,m.right=t.pageX-c.left;var f=0;m.left<0?f=m.left+c.width:m.right>0&&(f=m.right-(c.width+(d.right-c.right)));var g=parseFloat(o.css("left"))+f;o.css({top:_,left:g}),s._mouseStart(t),s._mouseStop(t),s._mouseStart(t);i.extend(!0,{},s);e.position.top=s.offset.top-i(window).scrollTop(),e.position.left=s.offset.left-i(window).scrollLeft(),n._cache.progress.restoreMaximizedDraggable=!1}function e(i,t){t.position.top=Math.round(parseFloat(t.position.top)),t.position.left=Math.round(parseFloat(t.position.left))}function s(i){return{position:i.position,originalOffset:a,originalPosition:r,offset:i.offset}}this._super();var n=this,o=this.uiDialog,a=(this.options,{}),r={};o.draggable("option",{scroll:!1,distance:1,iframeFix:!0,start:function(t,e){n.$elem.data(n._cnst.dataPrefix+"window-scrolls",{x:i(window).scrollLeft(),y:i(window).scrollTop()}),n._versionOf("dialog",">=","1.10.1")&&n._blockFrames(),n._interactionInProgress(!0),n._interactionsState(!0),n._hideTaskbarsSubordinates(),n._freezeBodyScrolls(),a=n.$elem.offset(),r=n.$elem.position(),n._trigger("dragStart",t,s(e))},stop:function(t,e){i(this).removeClass(n.classes.uiDialogDragging),n._interactionInProgress(!1),n._versionOf("dialog",">=","1.10.1")&&n._unblockFrames(),n._fullPxPosition(),n._refreshPositionOption(),n._setRestoreSize(),n._revertBodyScrolls(),n.$elem.removeData(n._cnst.dataPrefix+"window-scrolls"),n._trigger("dragStop",t,s(e))},drag:function(o,a){if(n.maximized()&&n.options.maximizedDraggable&&t(o,a),e(o,a),n._versionOf("dialog",">=","1.11.0")){var r=n.$elem.data(n._cnst.dataPrefix+"window-scrolls");a.position.left+=r.x-i(window).scrollLeft(),a.position.top+=r.y-i(window).scrollTop()}n._trigger("drag",o,s(a))}}),this._extendDraggableCancel(),this._setContainment()},_getRealContainment:function(){var i=this._getTaskbarInstance();return"inherit"===this.options.containment&&i?i.options.windowsContainment:this.options.containment},_getRealContainmentObject:function(){return i("."+this.classes.taskbarWindowsContainment)},_getVisibleContainmentArray:function(){var i,t,e,s,n,o=this._getTaskbarInstance();this._refreshTaskbarMargins();var a,r=this._cache.sizes.margins;if(this.bindings[0].length)a=this.bindings[0];else if(this.$elem.length)a=this.$elem;else{if(!this.element.length)return[0,0,0,0];a=this.element.parent()}var l=o._extendedPosition.call(a),h=o._extendedPosition.call(this._getRealContainmentObject(),"offset"),c=o._extendedPosition.call(this.uiDialogTitlebar.find("."+this.classes.uiDialogTitle),"offset"),d=this._bringIntoViewReserve(),m=this._getWindowScroll();return t=m.x+r.left,s=m.y+r.top,e=t+m.x+h.width-l.width,n=s+h.height-l.height-m.y,t-=c.width,s-=c.bottom-l.top-d-m.y,e+=c.width-(c.right-l.right)-d,n+=2*m.y+l.height-(c.top-l.top)-d,i=[t,s,e,n]},_getWindowScroll:function(){return this._getTaskbarInstance()._getWindowScroll()},_setContainment:function(){var t=this._getRealContainment();if(i.ui.draggable&&this.options.draggable&&this.uiDialog.hasClass(this.classes.uiDraggable)){var e;"viewport"===t?e=this._getRealContainmentObject():"visible"===t&&(e=this._getVisibleContainmentArray()),this.uiDialog.draggable("option","containment",e)}i.ui.resizable&&this.options.resizable&&this.uiDialog.hasClass(this.classes.uiResizable)&&("viewport"===t?this.uiDialog.resizable("option","containment","document"):"visible"===t&&this.uiDialog.resizable("option","containment",!1))},_extendDraggableCancel:function(){var i=this.uiDialog.draggable("option","cancel");-1===i.indexOf(this.classes.button)&&(i+=", ."+this.classes.button+", ."+this.classes.icon,this.uiDialog.draggable("option","cancel",i))},_openConfirmClose:function(){var t=this,e=this.options;if(e.confirmClose.confirm&&!this._cache.progress.close){this._placeOverlay({window:!0}),this.$confirmCloseWindow=i("<div></div>"),this.$confirmCloseWindow.addClass(this.classes.confirmClose).append(i("<p>"+this._buildConfirmCloseText("text")+"</p>").addClass(this.classes.confirmCloseText)).window({taskbar:this.$taskbar,minimizable:e.confirmClose.minimizable,modal:e.confirmClose.modal,containment:e.containment,durations:e.durations,icons:{main:e.icons.confirmClose},title:this._buildConfirmCloseText("title"),buttons:this._confirmCloseButtonsConfig(),closeOnEscape:!0,maximizable:!1,resizable:!1,height:"auto",minHeight:null,beforeMinimize:function(){t._cache.confirmCloseMinimizing=!0},minimize:function(){t._cache.confirmCloseMinimizing=!1},close:function(){t._unblock()}}),this._afterConfirmCloseButtonsBuild(),this._removeTopClasses(),this.$confirmCloseWindow.window("moveToTop");var s=this.$confirmCloseWindow.parent(),n=this._getTaskbarInstance(),o=n._extendedPosition.call(s,"offset"),a=n._extendedPosition.call(this.$elem,"offset"),r={},l=this._getWindowScroll();return r.top=a.top-l.y,r.left=a.left-l.x,r.top-=(o.height-a.height)/2,r.left-=(o.width-a.width)/2,s.css(r).attr("data-close-window-for",t.$elem.attr("id")),this.$confirmCloseWindow.window("refreshPosition"),this._cache.progress.close=!0,!0}return!1},_confirmCloseButtonsConfig:function(){var i=this;return[{text:this._buildConfirmCloseText("no"),click:function(){i.$confirmCloseWindow.window("close")}},{text:this._buildConfirmCloseText("yes"),click:function(){i.close(),i._closeConfirmCloseWindow()}}]},_afterConfirmCloseButtonsBuild:function(){var t=[this.classes.confirmCloseNo,this.classes.confirmCloseYes];i("."+this.classes.uiDialogButtonpane,this.$confirmCloseWindow.parent()).addClass(this.classes.confirmCloseButtons).find("."+this.classes.uiButton).each(function(e){i(this).addClass(t[e])})},_buildConfirmCloseText:function(i){var t=this.options,e={title:this.title()};return t.confirmClose[i]?this._getTaskbarInstance()._i18n_replace_keys(t.confirmClose[i],e):this._i18n(t.confirmClose[i+"Localized"],e)},_propagateConfirmCloseOptions:function(t,e){var s,n,o=this;"object"!=typeof t?(s={},s[t]=e):(s=t,n=!!e),i.each(s,function(t,e){if(o.$window.hasClass(o.classes.confirmClose)&&"confirmClose"===t){var s=o._getTaskbarInstance();if(!s)return;o._debugLogAdd("Trying to change confirmClose option on a window that is a confirm close window itself. Confirm close windows should not be nested.",1,2)}if(o.$confirmCloseWindow.length){if("durations"===t&&o.$confirmCloseWindow.window("option","durations",o.options.durations),"confirmClose"===t){var a=o.options.confirmClose,r=["modal","minimizable"],l=["title"],h=["text"],c=["yes","no"];i.each(r,function(i,t){(e[t]!==a[t]||n)&&o.$confirmCloseWindow.window("option",t,a[t])});var d=function(i){return e[i]!==a[i]||e[i+"Localized"]!==a[i+"Localized"]||n};i.each(l,function(i,t){d(t)&&o.$confirmCloseWindow.window("option",t,o._buildConfirmCloseText(t))}),i.each(h,function(i,t){var e=o._ucFirst(t);d(t)&&o.$confirmCloseWindow.find("."+o.classes["confirmClose"+e]).text(o._buildConfirmCloseText(t))}),i.each(c,function(i,t){d(t)&&(o.$confirmCloseWindow.window("option","buttons",o._confirmCloseButtonsConfig()),o._afterConfirmCloseButtonsBuild())})}"icons"===t&&o.$confirmCloseWindow.window("option","icons.main",o.options.icons.confirmClose),"title"===t&&o.$confirmCloseWindow.window("option","title",o._buildConfirmCloseText("title")),"taskbar"===t&&o.$confirmCloseWindow.window("option","taskbar",o.$taskbar)}})},_closeConfirmCloseWindow:function(){var t=this;this.$confirmCloseWindow.length&&(this.$confirmCloseWindow.window("option",{beforeClose:i.noop,close:function(){t._unblock()}}).window("close"),this.$confirmCloseWindow=i())},_unblock:function(){this.$confirmCloseWindow=i(),this._placeOverlay({destroy:!0,window:!0}),this._cache.progress.close=!1},_i18n:function(i,t,e){var s=this._getTaskbarInstance();return s?s._i18n(i,t,e):i},_createTitlebar:function(){if(this._super(),this._hasTaskbar()){var t=this;this.uiDialogTitlebarClose.off("click").on("click."+this._cache.uep,function(i){i.preventDefault(),t.options.closable&&t.close(i)}),this._setButtonCloseState(),this.uiDialogTitlebarClose.attr("data-button-name","close"),this.$elem=this.uiDialog.closest("."+this.classes.uiDialog),this._createButton("maximize"),this._createButton("minimize"),this.uiDialogTitlebar.on("dblclick."+this._cache.uep,function(e){return i(e.target).hasClass(t.classes.uiDialogTitlebar)||i(e.target).hasClass(t.classes.uiDialogTitle)?t.options.maximizable?(t._blurActiveElement(!0),void t._toggleMaximized()):!0:!1})}},_setButtonCloseState:function(){this.uiDialogTitlebarClose.button("option","label",this._i18n("close")),this._addButtonClasses(this.uiDialogTitlebarClose),this.uiDialogTitlebarClose.toggleClass(this.classes.hidden,!this.options.closable),this._enumerateTitlebarButtons()},_createButton:function(t){var e=this;"string"==typeof t&&(t={button:t});var s=t.button,n=this._ucFirst(s);return this.$elem.find("."+this.classes["button"+n]).remove(),"maximize"===s&&!this.options.maximizable||"minimize"===s&&!this.options.minimizable?void this._enumerateTitlebarButtons():(this["$"+s]=i("<button></button>").button({text:!1}).attr("data-button-name",s).addClass(this.classes["button"+n]+" "+this.classes.button).on({click:function(){"minimize"===s?e[s]():e._toggleMaximized(),"minimize"===s?this.blur():e.moveToTop()},mousedown:function(){i(this).siblings("."+e.classes.uiButton).removeClass(e.classes.uiStateHover),"maximize"===s&&this.focus()}}),this._setIcon({button:s}),this._setButtonText({button:s}),"minimize"===s?this["$"+s].appendTo(this.uiDialogTitlebar):this["$"+s].insertAfter(this.uiDialogTitlebarClose),void this._enumerateTitlebarButtons())},_speedUpAnimation:function(t,e){return"string"==typeof this.options.durations[t]?i.fx[this.options.durations[t]]:this.options.durations[t]*e},_moveToTop:function(t,e){var s=this,n=t&&t.type,o=t&&t.highest===!0,a=t&&t.skipThis===!0,r=t&&t.skipMinimizing===!0,l=t&&t.blurModals===!0,h=i(),c=document.activeElement,d=this._getActiveModal().filter(":visible").not("."+this.classes.windowMinimizing),m=this._getTaskbarInstance(),u=i();if(m&&(d.length&&!this.options.modal&&(a=!0),!this._cache.minimizing||!n)){var _=this.$elem.hasClass(this.classes.windowTop);this._cache.progress.close&&!a&&(o=!0,!this._cache.confirmCloseMinimizing&&s.$confirmCloseWindow.length&&(h=h.add(s.$confirmCloseWindow)));var f=m.options.windowsInitialZIndex,g=a?null:this.$elem,w=i("."+this.classes.window).not(r?null:"."+this.classes.windowMinimizing).not("."+this.classes.bodyOverlayed).add(a?this.$elem:null).not(g).not(h).not("."+this.classes.modal).filter(":visible");i("."+this.classes.taskbar).each(function(){var t=i(this),e=t.data(s._cnst.dataPrefix+"taskbar");u=u.add(e.windows().parent().filter("."+s.classes.modal).filter("."+s.classes.windowTop).not("."+s.classes.windowMinimizing).filter(":visible"))}),u=u.not(g);var p=this._sortByZIndex(w,"asc","raw");o&&(g=p.length?p.pop()[1]:null),g===this.$elem&&!a&&this.options.modal&&(this._revertActiveModalZIndexes(),this._minimizeOtherModals({skipZIndexRevert:!0})),this._removeTopClasses(w.add(o?this.$elem:null).not(d)),w.each(function(){i(this).children("."+s.classes.windowContent).data(s._cnst.dataPrefix+"window")._placeOverlay({window:"auto"})}),i.each(p,function(i,t){t[1].css("zIndex",f),f++});var b;if(g instanceof i){if(a)g[0].id!==this.$elem.attr("data-close-window-for")&&(b=!0);else if(g===this.$elem){var v=c===this.$elem[0]||i.contains(this.$elem[0],c),C=this.$elem.hasClass(this.classes.windowTop),z=parseInt(g.css("zIndex"),10);g.css("zIndex",Math.max(f,z)),g.hasClass(this.classes.bodyOverlayed)||this._setTopClasses(g),C||e||!n&&v||(this._focusTabbable(),this._trigger("focus",t)),this.options.modal&&this._modalZIndexes({revertActive:!1}),g.add(d).each(function(){i(this).children("."+s.classes.windowContent).data(s._cnst.dataPrefix+"window")._setConnectedButtonState()})}else b=!0;if(b)return void g.children("."+this.classes.windowContent).window("moveToTop")}return l&&this._removeTopClasses(u),this.$elem.hasClass(this.classes.bodyOverlay)||this._placeOverlay({destroy:!0}),l||g===this.$elem||this._setTopModalState(g),g!==this.$elem||_||this._cache.progress.close||this._trigger("moveToTop",t),g!==this.$elem||a||o||_?void 0:!0}},_setTopClasses:function(i){var t=i?i:this.$elem;t.addClass(this.classes.windowTop).children("."+this.classes.uiDialogTitlebar).addClass(this.classes.uiStateActive),this._setConnectedButtonsState(t.children("."+this.classes.windowContent))},_removeTopClasses:function(t){var e=t?t:this.$elem,s=this;e.each(function(){var t=i(this);t.hasClass(s.classes.windowTop)&&(t.removeClass(s.classes.windowTop).children("."+s.classes.uiDialogTitlebar).removeClass(s.classes.uiStateActive),t.children("."+s.classes.windowContent).data(s._cnst.dataPrefix+"window")._trigger("moveToBackground",{},{}))}),this._setConnectedButtonsState(e.children("."+this.classes.windowContent))},_setConnectedButtonsState:function(t){var e=this;t.each(function(){i(this).data(e._cnst.dataPrefix+"window")._setConnectedButtonState()})},_animate:function(i,t){t.duration===!1?(this.css(i),t.start&&t.start(),t.complete&&t.complete(),t.always&&t.always()):this.animate(i,t)},_close:function(t){if(this._onInteractionEnd("close")!==!0&&!this._cache.closeInevitable){if(!this._cache.closeForced){if(this._openConfirmClose()===!0)return;if(this._trigger("beforeClose",t)===!1)return}this._cache.closeInevitable=!0,this._clearTimeouts(),this._closeConfirmCloseWindow(),this._taskbarUnbind(),this._revertModalZIndexes({force:!0}),this.options.durations={minimize:!1},this._hideOverlay(),this._isOpen=!1,this._destroyOverlay(),this.destroy(),this.opener.filter(":focusable").focus().length||i(this.document[0].activeElement).blur(),this._trigger("close",t,{})}},show:function(i){var e=i===!1,s=this._parseDuration(i);if((!this._animationProgress()||i&&s&&(!i||"dblclick"===i.type)||e)&&this._onInteractionEnd("minimize",i)!==!0){var n={};if(this._cache.suppressEvents||this._trigger("beforeShow",i,n)!==!1){this.$elem.removeClass(this.classes.windowMinimized),this._cache.minimized&&this.$elem.css(this._getButtonCoordinates()),this._cache.showing||this.$elem.stop(!0,e),this._cache.minimized=!1,this._cache.showing=!0;var o,a=this._cache.animationProgress,r=this._cache.minimizing?this.options.durations.minimize:t;this.moveToTop();var l=this,h=this._cache.maximized?this._cache.sizes.containment:this._cache.sizes.self;r!==t&&(o=this._speedUpAnimation("minimize",a)),h.opacity=1,this._deleteBottomRight(h),this.$elem.show().addClass(this.classes.windowShowing),this._interactionsState(!1);var c=this._cache.shown||i&&"dblclick"===i.type||e?!1:o||s||this.options.durations.show;this._cache.shown=!0;var d={duration:c,complete:function(){l._fixTitlebarTitleWidth(),l._setContentHeight(),l._focusTabbable(),l.$elem.hasClass(l.classes.windowTop)&&l._trigger("focus")},progress:function(){l._fixTitlebarTitleWidthDuringAnimation.apply(l,arguments),l._setContentHeight()},always:function(){l.$elem.removeClass(l.classes.windowShowing).removeClass(l.classes.windowMaximizing).removeClass(l.classes.windowRestoring),l._cache.showing=!1,l._interactionsState(!0),l.refreshPosition(),l.$elem.css("opacity",""),l._setRestoreSize();var i={};l._triggerInternal("afterWindowAnimationStop"),l._cache.suppressEvents||l._trigger("show",{},i)}};this._animate.call(this.$elem,h,d),this._createOverlay(),this._showOverlay()}}},_minimize:function(i){var t=i===!1,e=this._parseDuration(i);if((!this._animationProgress()||t||this._isMinimizeAllInProgress())&&this._onInteractionEnd("minimize",i)!==!0){var s=this,n=i&&i.skipZIndexRevert,o={minimizeAllInProgress:this._isMinimizeAllInProgress()};if(this._cache.suppressEvents||this._trigger("beforeMinimize",{},o)!==!1){if(this._clearTimeouts(),this._cache.progress.close){var a=s.$confirmCloseWindow.window("option","durations.minimize");s.$confirmCloseWindow.window("option","durations.minimize",t?!1:s.options.durations.minimize).window("minimize").window("option","durations.minimize",a)}n||this._revertModalZIndexes(),this.$elem.addClass(this.classes.windowMinimizing),this._isMinimizeAllInProgress()||n||this._moveToTop({highest:!0}),(this._isMinimizeAllInProgress()||n)&&this.$elem.removeClass(this.classes.windowTop),n&&this._revertModalZIndexes({$elem:this.$elem});
var r=this._getButtonCoordinates(),l=t?!1:e||this.options.durations.minimize;this.$elem.stop(!0,t),this._blurActiveElement(!0),this._cache.minimizing=!0,this._interactionsState(!1);var h={duration:l,complete:function(){s._fixTitlebarTitleWidth(),s._setContentHeight()},progress:function(){s._fixTitlebarTitleWidthDuringAnimation.apply(s,arguments),s._setContentHeight()},always:function(){s.$elem.hide().addClass(s.classes.windowMinimized).removeClass(s.classes.windowMinimizing),s._cache.minimizing=!1,s._cache.minimized=!0,s._cache.shown=!1,s._destroyOverlay({justDestroy:!0});var i={minimizeAllInProgress:s._isMinimizeAllInProgress()};s._cache.suppressEvents||s._trigger("minimize",{},i),s._triggerInternal("afterWindowAnimationStop")}};this._hideOverlay(),this._animate.call(this.$elem,r,h)}}},_toggleMaximized:function(t,e){"undefined"==typeof t&&(t=!this.maximized());var s=e===!1,n=this._parseDuration(e),o=t?"maximize":"restore",a=t?"restore":"maximize",r=t?"maximized":"restored",l=t?"restored":"maximized",h="before"+this._ucFirst(o),c={};if(this._cache.progress.restoreMaximizedDraggable||this._onInteractionEnd(a,e)!==!0){var d=this,m=t?"maximizing":"restoring",u=t?"restoring":"maximizing",_="restore"===a&&this._cache.maximizing||"maximize"===a&&this._cache.restoring||this._cache.minimizing||this._cache.showing,f=this._cache.animationProgress;if((!this._animationProgress()||this._animationProgress(u)||s)&&(this._cache.suppressEvents||this._trigger(h,{},c)!==!1)){if(this._cache.minimized&&!this._cache.minimizing){this._cache.suppressEvents=!0,this.$elem.removeClass(this.classes.windowMinimized);var g=i.extend(!0,{},this.options.durations);return this.options.durations=i.extend(!0,{},this._noAnimationDurations()),this.show(),t?this.maximize():this.restore(),this.minimize(),this.$elem.addClass(t?this.classes.windowMaximizing:this.classes.windowRestoring),this.options.durations=g,this.show(e),this._cache[r]=!0,this._cache[l]=!1,this.$elem.removeClass(this.classes.windowShowing),this._cache.suppressEvents=!1,void this._trigger(t?"maximize":"restore",{},{})}this._cache.maximized=t,this._cache.restored=!t,this._cache.minimized=!1,this.$elem.find("."+this.classes.uiDialogTitlebar+" ."+this.classes.uiButton).removeClass(this.classes.uiStateHover),t||this.$elem.removeClass(this.classes.windowMaximized),this.$elem.stop(!0,s).addClass(this.classes.window+"-"+m),this._cache[m]=!0,this._cache[u]=!1,this.$maximize&&this.$maximize.length&&this.$maximize.closest(this.uiDialogTitlebar).length&&(this._setButtonText({button:"maximize",label:a}),this._setIcon({icon:a,button:"maximize"})),this._interactionsState(!1);var w=t?this._cache.sizes.containment:this._cache.sizes.self;this._deleteBottomRight(w),w.opacity=1;var p=_?this._speedUpAnimation(o,f):this.options.durations[o],b={duration:s?!1:n||p,complete:function(){d._fixTitlebarTitleWidth(),d._setContentHeight()},progress:function(){d._fixTitlebarTitleWidthDuringAnimation.apply(d,arguments),d._setContentHeight()},start:function(){d._cache.shown=!0},always:function(){d._cache[m]=!1,d._cache[u]=!1,d._cache[r]=!0,d._cache[l]=!1,d.$elem.removeClass(d.classes.window+"-"+m).toggleClass(d.classes.windowMaximized,t).css("opacity",""),d._interactionsState(!t);var i={};d._triggerInternal("afterWindowAnimationStop"),d._fullPxPosition(),t||_||d._setRestoreSize(),d._cache.suppressEvents||d._trigger(o,{},i)}};this._animate.call(this.$elem,w,b),this._showOverlay()}}},_animationProgress:function(i){return i?this._cache[i]:this._cache.showing||this._cache.maximizing||this._cache.minimizing||this._cache.restoring},_noAnimationDurations:function(){return{maximize:!1,minimize:!1,show:!1,restore:!1}},_enumerateTitlebarButtons:function(){this.uiDialogTitlebar.children("."+this.classes.uiButton).removeAttr("data-button-order"),this.uiDialogTitlebar.children("."+this.classes.uiButton+":not(."+this.classes.hidden+")").each(function(t){i(this).attr("data-button-order",t)})},_setConnectedButtonState:function(){i("."+this.classes.taskbar+" ."+this.classes.taskbarWindowButton).removeClass(this.classes.uiStateActive);var t=this._getTaskbarInstance();if(t){var e=this.$taskbar.taskbar("button",this.$window);e.length&&t._setConnectedButtonState.call(e[0],t)}},_setWidth:function(){this._setDimension("width"),this._setContentHeight()},_setHeight:function(){this._setDimension("height"),this._setContentHeight()},_setDimension:function(i){var t=this.options,e=t[i],s="min"+this._ucFirst(i),n="max"+this._ucFirst(i),o=t[s],a=Math.round(parseFloat(this.$elem.css(i))),r=this._cache.sizes.containment,l=this._getRealContainment();"auto"===e&&(this.$elem.css(i,""),this.$window.css(n,""),a=Math.round(parseFloat(window.getComputedStyle(this.$elem[0])[i]))),e=this._cache.maximized?r[i]:e===parseInt(e,10)?Math.max(o,e):Math.max(o,a),"viewport"===l&&r&&(e=Math.round(Math.min(e,r[i]))),this.$elem.css(i,e)},_setIcon:function(i){"undefined"==typeof i.icon&&(i.icon=i.button),this["$"+i.button].button("option","icons.primary",this.options.icons[i.icon]),this._addButtonClasses(this["$"+i.button])},_refreshButtonIcons:function(){this._setIcon({button:"close"}),this._setIcon({button:"minimize"}),this._setIcon({icon:this._cache.maximized?"restore":"maximize",button:"maximize"})},_setButtonsTexts:function(){var e=this;i.each(this._titlebarButtons,function(i,s){var n=e["$"+s];n&&n.length&&n.hasClass(e.classes.uiButton)&&e._setButtonText({button:s,label:"maximize"===s?e._cache.maximized?"maximize":"restore":t})})},_setButtonText:function(i){this["$"+i.button].button("option","label",this._i18n(i.label||i.button)),this._addButtonClasses(this["$"+i.button])},_addButtonClasses:function(i){i.find("."+this.classes.uiButtonIconPrimary+", ."+this.classes.uiButtonText).addClass(this.classes.titlebarButtonIcon)},_interactionsState:function(i){this._draggableState(i),this._resizableState(i)},_interactionInProgress:function(t){if("undefined"==typeof t)return this._cache.progress.interaction;if(this._cache.progress.interaction=t,t===!1){var e=this._cache.onInteractionEnd.length;if(e){for(var s=0;e>s;s++){var n=this._cache.onInteractionEnd[s];if(i.inArray(n.action,["close","destroy"])>-1){this[n.action]();break}(n.quick===!1||s+1===e)&&this[n.action](n.quick)}this._cache.onInteractionEnd=[]}}},_onInteractionEnd:function(i,t){return this._interactionInProgress()===!0?(this._cache.onInteractionEnd.push({action:i,quick:t}),!0):void 0},_draggableState:function(i){if(this.$elem.hasClass(this.classes.uiDraggable)){var t=this.options.maximizedDraggable&&this._cache.maximized&&!this._animationProgress(),e=(i||t)&&this.options.draggable;this.$elem.draggable(e?"enable":"disable")}this._removeClassDisabled()},_resizableState:function(i){this.$elem.hasClass(this.classes.uiResizable)&&this.$elem.resizable(i&&this.options.resizable?"enable":"disable"),this._removeClassDisabled()},_clearTimeouts:function(){clearTimeout(this._cache.timeouts.closeWindowShow)},_removeClassDisabled:function(){this.$elem.removeClass(this.classes.uiStateDisabled)},_setRestoreSize:function(){if(!this.maximized()&&!this.minimized()){var i=this.$elem;this._cache.sizes={self:this._getDimensions.call(i,{position:!0})},this._cache.sizes.diffs={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this._refreshContainmentSize()}},_refreshContainmentSize:function(){this._cache.sizes.containment=this._getDimensions.call(this._getRealContainmentObject(),{position:!0}),this._refreshTaskbarMargins(),this._cache.sizes.containment.width-=this._cache.sizes.diffs.width,this._cache.sizes.containment.height-=this._cache.sizes.diffs.height},_refreshTaskbarMargins:function(){var i=this._getTaskbarInstance();i&&(this._cache.sizes.margins=i._getMaxTaskbarsMargins())},_getDimensions:function(t){var e=this,s=i.extend({},t&&t.position?e.position():e.offset(),{width:t&&t.outer?e.outerWidth():e.width(),height:t&&t.outer?e.outerHeight():e.height()});return s.bottom=s.height+s.top,s.right=s.width+s.left,s},_getButtonCoordinates:function(){var t=this.button(),e=this.$taskbar.hasClass(this.classes.taskbarHorizontal),s=this._getDimensions.call(t,{offset:!0});s.top-=i(window).scrollTop(),s.left-=i(window).scrollLeft(),s.opacity=0,s[e?"height":"width"]=0;var n=this.$taskbar.data(this._cnst.dataPrefix+"taskbarEdge");return"top"===n&&(s.top+=this.$taskbar.height()),"left"===n&&(s.left+=this.$taskbar.width()),this._deleteBottomRight(s),s},_refreshPosition:function(t){var e=this;if(t=t||{},!this._cache.minimized||this._cache.minimizing){var s=this._getRealContainment();if(t&&t.skipOnFit&&s===this._cache.refreshPositionContainment&&"viewport"!==s){var n=this._getTaskbarInstance();if(!n)return;var o=n._extendedPosition.call(n.$windowsContainment,"offset"),a=n._extendedPosition.call(this.$elem,"offset");if(a.right<=o.right&&a.bottom<=o.bottom&&a.top>=o.top&&a.left>=o.left)return}if(this._animationProgress())return void this._bindInternal("afterWindowAnimationStop",function(){e.refreshPosition()});this._cache.progress.refreshPosition=!0,this.$elem.stop(!0,!0),this._refreshContainmentSize(),this._setContainment();var r=this._cache.sizes.containment,l=this._cache.sizes.self;if(this.maximized()&&this.$elem.css(r),this.$windowOverlay&&this.$windowOverlay.length&&this._placeOverlay(this.$windowOverlay.hasClass(this.classes.contentOverlay)?{content:!0}:{window:!0}),this._cache.refreshPositionContainment=s,"visible"===this._cache.refreshPositionContainment)return this._setWidth(),this._setHeight(),this._moveIntoView(),this._setRestoreSize(),this._cache.progress.refreshPosition=!1,void this._refreshPositionOption();l.width=Math.min(l.width,r.width),l.height=Math.min(l.height,r.height);var h,c=!1,d=this.maximized(),m=this.minimized();return(d||m)&&(c=!0,this._cache.suppressEvents=!0,h=i.extend(!0,{},this.options.durations),this.options.durations=i.extend(!0,{},this._noAnimationDurations()),this.restore()),this._setRestoreSize(),l=this._fixPosition(l),l=this._roundObj(l),i.extend(this._cache.sizes.self,l),this.$elem.css(l),this._setWidth(),this._setHeight(),this._setRestoreSize(),d&&this.maximize(),m&&this.minimize(),c&&(this.options.durations=h,this._cache.suppressEvents=!1),this._moveIntoView(),this._fixTitlebarTitleWidth(),this._setContentHeight(),this._setRestoreSize(),this._refreshPositionOption(),this._cache.progress.refreshPosition=!1,this}},_bringIntoView:function(i){var t=(this.$title,this._getTaskbarInstance());if(t){var e=t._extendedPosition.call(this.$title,"offset"),s=t._extendedPosition.call(this._getRealContainmentObject(),"offset"),n=t._extendedPosition.call(this.$elem),o=this._bringIntoViewReserve(),a=(window.getComputedStyle(this.$title[0]),{}),r={};if(r.top=-1*(s.top-(e.bottom-o)),r.bottom=s.bottom-(e.top+o),r.left=-1*(s.left-(e.right-o)),r.right=s.right-(e.left+o),i&&i.round&&(r.top=Math.round(r.top),r.bottom=Math.round(r.bottom),r.left=Math.round(r.left),r.right=Math.round(r.right)),a.top=Math.min(r.top,0),a.bottom=Math.min(r.bottom,0),a.left=Math.min(r.left,0),a.right=Math.min(r.right,0),i&&i.diffs)return a;if(i&&i.move){var l={};l.top=n.top,l.left=n.left,l.top-=a.top,l.top+=a.bottom,l.left-=a.left,l.left+=a.right,l=this._roundObj(l),this.$elem.css(l)}}},_fixPosition:function(t){this._refreshContainmentSize();var e=this._getRealContainment(),s=this._cache.sizes.containment,t=t||i.extend({},this._cache.sizes.self),n=this;return this._deleteBottomRight(t),i.each([{edge:"top",dimension:"height"},{edge:"left",dimension:"width"}],function(i,o){if("viewport"===e&&(t[o.edge]!==(t[o.edge]=Math.max(t[o.edge],s[o.edge]))&&(t[o.dimension]=Math.min(t[o.dimension],s[o.dimension])),t[o.edge]+t[o.dimension]>s[o.edge]+s[o.dimension])){var a=t[o.edge]+t[o.dimension]-(s[o.edge]+s[o.dimension]);t[o.edge]>=a?t[o.edge]-=a:(t[o.edge]-=a,t[o.dimension]-=Math.abs(t[o.edge]),t[o.edge]=0)}{var r="min"+n._ucFirst(o.dimension);"max"+n._ucFirst(o.dimension)}n.options[r]>t[o.dimension]&&(t[o.dimension]=Math.min(n.options[r],s[o.dimension]))}),t},_deleteBottomRight:function(i){delete i.bottom,delete i.right},_bringIntoViewReserve:function(){return parseInt(this.uiDialogTitlebar.find("."+this.classes.uiDialogTitle).css("fontSize"),10)},_moveIntoView:function(){this._bringIntoView({move:!0})},_roundObj:function(t){return"object"==typeof t&&i.each(t,function(i,e){isNaN(parseInt(e),10)||(t[i]=Math.round(parseFloat(e)))}),t},_fullPxPosition:function(t){var e=this;i.each(t||["top","left","width","height"],function(i,t){e.$elem.css(t,Math.round(parseFloat(e.$elem.css(t))))})},_fixTitlebarTitleWidth:function(){var i=this.$elem.find("."+this.classes.uiDialogTitlebar+" ."+this.classes.uiButton+":last"),t=i.prev("."+this.classes.uiButton);if(i.length&&t.length){var e=this.$elem.find("."+this.classes.uiDialogTitle),s=t.offset().left-i.offset().left-i.outerWidth();e.css("width",i.offset().left-e.offset().left-s)}},_fixTitlebarTitleWidthDuringAnimation:function(){"number"==typeof arguments[1]&&(this._cache.animationProgress=arguments[1]),this._fixTitlebarTitleWidth()},_setWindowIcon:function(){var t=this.$elem.find("."+this.classes.icon);t.length&&null===this.options.icons.main&&t.remove(),this.uiDialogTitlebar.removeClass(this.classes.titlebarIcon);var e=this._getTaskbarInstance();if(e){var s=e.$elem.find("[data-window-id="+this.$window[0].id+"]");e._refreshWindowButtonIcon.call(s,e),null!==this.options.icons.main&&(this.uiDialogTitlebar.addClass(this.classes.titlebarIcon),t.length||(t=i("<span></span>").prependTo(this.uiDialogTitlebar)),t.removeAttr("class").addClass(this.classes.uiIcon+" "+this.classes.icon+" "+this.options.icons.main))}},_setContentHeight:function(){var i=this._getTaskbarInstance();if(i){this.$window.css({height:"auto",maxHeight:""});var t=i._extendedPosition.call(this.$elem,"offset"),e=i._extendedPosition.call(this.$window,"offset"),s=Math.round(t.bottom-e.top-parseFloat(this.$window.css("borderBottomWidth"))-parseFloat(this.$window.css("paddingTop"))-parseFloat(this.$window.css("paddingBottom")));this.uiDialogButtonPane.length&&this.uiDialogButtonPane.children().length&&(s-=this.uiDialogButtonPane.outerHeight()),this.$window.css("maxHeight",s)}},_createTitleForEmpty:function(){if(this._hasTaskbar()&&null===this.options.title){var i=this.$taskbar.data(this._cnst.dataPrefix+"taskbar").$windowsContainment,t=i.data(this._cnst.dataPrefix+"taskbarNewWindowsCount")||0,e="number"==typeof this._cache.newWindowNumber?this._cache.newWindowNumber:++t;this._cache.newWindowNumber=e,this._setNewWindowTitle(e),i.data(this._cnst.dataPrefix+"taskbarNewWindowsCount",t)}},_title:function(){if(this.options.titleLocalized)if(this._i18n(this.options.titleLocalized))this._setTitle(this._i18n(this.options.titleLocalized));else{this._setTitle(this._cache.title);var i=this._getTaskbarInstance();this._debugLogAdd('Missing translation for window title with key "'+this.options.titleLocalized+'" in language "'+i.options.language+'".',2,1)}else null!==this._cache.title&&this._setTitle(this._cache.title)},_setNewWindowTitle:function(i){this._setTitle(1===i?this._i18n("newWindow"):this._i18n("newWindowNext",{counter:i}))},_setTitle:function(i){if(arguments.length||(i=this._cache.realTitle),this._cache.realTitle=i,this.uiDialogTitlebar){var t=this.uiDialogTitlebar.find("."+this.classes.uiDialogTitle);this._cache.realTitle?t.text(this._cache.realTitle):t.html("&#160;")}this._setConnectedButtonTitle()},_setConnectedButtonTitle:function(){var i,t=this._cache.realTitle,e=this._getTaskbarInstance();if(e){try{i=this.$taskbar.taskbar("button",this.$window)}catch(s){return}if(i.attr("data-group-name")){var n=e.connectedElement(i).filter("."+this.classes.uiMenu).find('[data-window-id="'+this.$window[0].id+'"]');e._refreshWindowButtonIcon.call(n,e)}else e._buttonSetTitle.call(i,t,this._getTaskbarInstance())}},_cacheTitle:function(i){this._cache.title=i},_focusTabbable:function(){i(document.activeElement).blur(),this._super(),this._blurActiveElement()},_sortByZIndex:function(t,e,s){var n=[],o=this._cnst.lowestPossibleZIndex;if(t.each(function(){var t=parseInt(i(this).css("zIndex"),10)||++o;n.push([t,i(this)])}),n.sort(function(i,t){return"asc"===e?i[0]-t[0]:t[0]-i[0]}),"raw"===s)return n;var a=i();return i.each(n,function(i,t){a=a.add(t[1])}),a},_setModalZIndexes:function(){if(this.$elem.removeClass(this.classes.modal),this.options.modal){var t=this;this.$elem.addClass(this.classes.modal);var e=this.options.modalOverlay,s=this._cnst.lowestPossibleZIndex,n=i(),o=i(),a=i("."+this.classes.taskbar),r=i("."+this.classes.window);if("all"===e)n=n.add(a).add(r),o=i();else if("viewport"===e)n=n.add(r),o=o.add(a);else{if(!(e instanceof i))return;n=n.add(a).add(r).not(e),o=e}n=n.not(this.$elem).not("."+this.classes.modal+"."+this.classes.windowTop),o=o.not(this.$elem).not("."+this.classes.modal+"."+this.classes.windowTop);var l={};l.$setCover=n,l.$setNoCover=o,this._trigger("modalOverlaySetsCreated",{},l),n=l.$setCover,o=l.$setNoCover;var h=function(e){var n=i(this),o=parseInt(n.css("zIndex"),10);s=Math.max(o,s);var a=t._hasInlineProperty(n,"z-index"),r=e?t.classes.coveredByOverlay+t.uuid:t.classes.notCoveredByOverlay+t.uuid;n.hasClass(r)||n.data(t._cnst.dataPrefix+"previousZIndex"+t.uuid,o).data(t._cnst.dataPrefix+"inlineZIndex"+t.uuid,a).addClass(r)};if(n.length){n.each(function(){h.call(this,!0)}),n=this._sortByZIndex(n,"desc");var c=s;n.each(function(){i(this).css("zIndex",--c)})}this.$overlaySet=n,this.overlay||(this._createOverlay(),this._hideOverlay(!1)),s===this._cnst.lowestPossibleZIndex&&(s=parseInt(this.$elem.css("zIndex"),10)),this._cache.modalOverlayZIndex=++s,this.overlay.css("zIndex",this._cache.modalOverlayZIndex),o.length&&(o.each(function(){h.call(this,!1)}),o=this._sortByZIndex(o,"asc"),o.each(function(){i(this).css("zIndex",++s)})),this.$elem.css("zIndex",++s)}},_modalZIndexes:function(i){i&&i.revertActive===!1||this._revertActiveModalZIndexes(),this._revertModalZIndexes(),this._setModalZIndexes()},_revertModalZIndexes:function(t){if(this.options.modal){var e={};"object"==typeof t&&(e=t,t=!!e.force);var s=this,n=function(){var e=i(this);if(e.hasClass(s.classes.modal)&&e.hasClass(s.classes.windowTop)&&!t)return!0;var n=e.data(s._cnst.dataPrefix+"previousZIndex"+s.uuid),o=e.data(s._cnst.dataPrefix+"inlineZIndex"+s.uuid),a=o?n:"";e.removeData(s._cnst.dataPrefix+"previousZIndex"+s.uuid).removeData(s._cnst.dataPrefix+"inlineZIndex"+s.uuid).removeClass(s.classes.coveredByOverlay+s.uuid).removeClass(s.classes.notCoveredByOverlay+s.uuid).css("zIndex",a)};if(e.$elem)return void i(e.$elem).each(n);i("."+this.classes.coveredByOverlay+this.uuid).each(n),i("."+this.classes.notCoveredByOverlay+this.uuid).each(n)}},_revertActiveModalZIndexes:function(){var t=this._getAllModals(),e=this;t.length&&t.children("."+this.classes.windowContent).each(function(){var t=i(this),s=t.data(e._cnst.dataPrefix+"window");s._revertModalZIndexes({force:!0})})},_setTopModalState:function(i){var t=this._getActiveModal();this.options.modal&&(t=t.add(this.$elem)),t=t.filter("."+this.classes.windowTop),!t.length||i&&t.attr("id")===i.attr("id")||t.children("."+this.classes.windowContent).window("moveToTop",null,!0)},_getActiveModal:function(){return i("."+this.classes.modal).not("."+this.classes.windowMinimizing+":visible").not(this.$elem)},_getAllModals:function(){return i("."+this.classes.modal).not(this.$elem)},_minimizeOtherModals:function(t){if(this.options.modal){var e=this,s=this._getActiveModal();s.length&&s.each(function(){var s=i(this).children("."+e.classes.windowContent),n=s.window("option","durations.minimize");s.window("option","durations.minimize",!1).window("minimize",t).window("option","durations.minimize",n)})}},_isMinimizeAllInProgress:function(){return!!this._getTaskbarInstance().$windowsContainment.data(this._cnst.dataPrefix+"minimizeAllInProgress")},_hideTaskbarsSubordinates:function(){i("."+this.classes.taskbar).taskbar("hideSubordinates")},_createOverlay:function(){if(!this.overlay&&this.options.modal){this._super();var i=this;this._versionOf("dialog","==","1.10.0")&&this.overlay.appendTo(this._appendTo()),this.overlay.addClass(this.classes.dialogOverlay).css("zIndex",this._cache.modalOverlayZIndex).attr("data-taskbar-uuid",this._getTaskbarInstance().uuid).attr("data-window-uuid",this.uuid).on("click."+this._cache.uep+" dblclick."+this._cache.uep,function(e){i.options.minimizable&&i.minimize("dblclick"===e.type?!1:t)})}},_destroyOverlay:function(i){var t=i&&i.justDestroy;this.overlay&&(this.overlay.stop(!0,!0),this.options.modal&&!t&&this._revertModalZIndexes({force:!0}),this._super(),this.overlay&&this.overlay.length&&(this.overlay=null))},_showOverlay:function(){if(this.options.modal&&this.overlay){var i=this._getTaskbarInstance()._styleIndicator(this.classes.uiWidgetOverlay,"opacity").opacity;this.overlay.show().stop(!1,!0);var t={opacity:i},e={duration:this.options.durations.show};this._animate.call(this.overlay,t,e)}},_hideOverlay:function(i){if(this.options.modal){var t=this;if(this.overlay){this.overlay.stop(!0,!0);var e={opacity:0},s={duration:"undefined"!=typeof i?i:this.options.durations.minimize,always:function(){t.overlay&&t.overlay.hide()}};this._animate.call(this.overlay,e,s)}}},_placeOverlay:function(t){t=t||{},this.$elem.find("."+this.classes.windowOverlay+":not(."+this.classes.bodyOverlay+")").remove(),this.$elem.removeClass(this.classes.contentOverlayed),this.$windowOverlay=null,t&&"auto"===t.window&&(t.window=this.$elem.hasClass(this.classes.bodyOverlay));var e=this;if(t&&t.destroy)return void(t.window&&this.$elem.removeClass(this.classes.bodyOverlayed).find("."+this.classes.windowOverlay).remove());if(t.content=!(!this.options.embeddedContent&&!t.content||t&&t.window),!(this.$elem.hasClass(this.classes.windowTop)&&t.content||(this._blurActiveElement(),!t.content&&t.destroy))){if(t.content||t.window){if(this.$elem.find("."+this.classes.bodyOverlay).length&&(!t||!t.window))return;this.$windowOverlay=i("<div></div>").addClass(this.classes.windowOverlay+" "+this.classes.uiWidgetOverlay).addClass(t.content?this.classes.contentOverlay:this.classes.bodyOverlay),this.$elem.find("."+this.classes.windowOverlay).remove(),this.$elem.prepend(this.$windowOverlay),this.$elem.addClass(t.content?this.classes.contentOverlayed:this.classes.bodyOverlayed)}t.content&&this.$windowOverlay.on("mousedown."+this._cache.uep,function(i){e._clearTrigger(i)}),t.window&&this.$windowOverlay.off("mousedown."+this._cache.uep).on("mousedown."+this._cache.uep,function(){e._cache.progress.close&&e.$confirmCloseWindow.length&&e.$confirmCloseWindow.window("show")})}},_preventGlobalWindowClick:function(){var i=this._getTaskbarInstance();if(i){var t=i.$windowsContainment.data(this._cnst.dataPrefix+"taskbars")||0,e=i.$windowsContainment.data(this._cnst.dataPrefix+"preventClicks")||0;this._cache.taskbarsOnClickPrevention=t,i.$windowsContainment.data(this._cnst.dataPrefix+"preventClicks",t+e)}},_revertGlobalWindowClick:function(){var i=this._getTaskbarInstance();if(i){var t=i.$windowsContainment.data(this._cnst.dataPrefix+"preventClicks"),e=this._cache.taskbarsOnClickPrevention,s=Math.max(t-e,0);i.$windowsContainment.data(this._cnst.dataPrefix+"preventClicks",s)}},_createButtons:function(){this._super();var t=this;if(this.uiDialog.hasClass(this.classes.uiDialogButtons)){var e=0;i.each(this.options.buttons,function(s,n){var o;n.textLocalized&&(o=t._i18n(n.textLocalized),"undefined"!==o&&i("."+t.classes.uiButton+":eq("+e+")",t.uiDialogButtonPane).button({label:o})),n.textLocalized&&"undefined"!==o||n.text||isNaN(parseInt(s))||t._debugLogAdd('No text or textLocalized providen for button "'+s+'".',2,1),++e})}},_setMinimizableMaximizableClasses:function(){this.$elem.toggleClass(this.classes.unminimizable,this.options.minimizable===!1),this.$elem.toggleClass(this.classes.unmaximizable,this.options.maximizable===!1)},_languageChange:function(){this._createTitleForEmpty(),this._title(),this._propagateConfirmCloseOptions({confirmClose:{},title:null}),this._setButtonsTexts(),this._createButtons()},_size:function(){this._versionOf("dialog","==","1.10.0")&&(this._isOpen=!0),this._super()},_debugLogAdd:function(i,t,e){var s=this._getTaskbarInstance();s&&(s._consolePrefix(this.$window[0].id,"window"),s._debugLogAdd(i,t,e),s._consolePrefix(!0))},_hasInlineProperty:function(i,t){var e=i.prop("style");for(var s in e)if(e.hasOwnProperty(s)&&e[s]===t)return!0;return!1},_clearTrigger:function(t){var e=this._getTaskbarInstance();e&&i(window).trigger("click."+e._cache.uep,t)},_blurActiveElement:function(t){var e=this.document[0].activeElement,s=this.bindings[0];(t&&(i.contains(s,e)||e===s)||!t&&e===this.uiDialogTitlebarClose[0])&&i(e).blur()},_ucFirst:function(i){return i[0].toUpperCase()+i.slice(1)},_versionOf:function(t,e,s){return i.simone.taskbar.prototype._versionOf.call(null,t,e,s)},_parseDuration:function(e){return"number"==typeof e?e:e in i.fx.speeds?i.fx.speeds[e]:t},_trigger:function(t,e,s){return"open"===t||"create"===t&&!this._cache.initialized?void 0:(i.extend(s,{instance:this,$widget:this.$elem,$window:this.$window}),"taskbarNotFound"!==t&&i.extend(s,{taskbar:this._getTaskbarInstance(),$taskbar:this.$taskbar}),this._super(t,e,s))},button:function(){var t=this._getTaskbarInstance();return t?t.button(this.$window):i()},close:function(i){this._close(i)},confirmCloseWindow:function(){return this.$confirmCloseWindow},containment:function(){return this._getRealContainment()},maximize:function(i){this._toggleMaximized(!0,i)},maximized:function(){return this._cache.maximized&&!this._cache.maximizing},maximizing:function(){return this._cache.maximizing},minimize:function(i){this._minimize(i)},minimized:function(){return this._cache.minimized&&!this._cache.minimizing},minimizing:function(){return this._cache.minimizing},modalOverlay:function(){return this.overlay||i()},moveToTop:function(i,t){this._moveToTop(i,t)},open:function(i){this._cache.initialized?(this._debugLogAdd('Method "open" is an alias for method "show". Use method "show" instead.',2,2),this.show(i)):this._super()},refreshPosition:function(i){this._refreshPosition(i)},restore:function(i){this._toggleMaximized(!1,i)},restored:function(){return this.shown()&&!this.maximized()},restoring:function(){return this._cache.restoring},shown:function(){return this.$elem.is(":visible")&&!this._animationProgress()},showing:function(){return this._cache.showing},taskbar:function(){return this.$taskbar},title:function(){return this._cache.realTitle},_checkForInvalidOptions:function(i,t,e){var s=this._getTaskbarInstance();s&&(s._consolePrefix(this.$window[0].id,"window"),s._checkForInvalidOptions(i,t,e),s._consolePrefix(!0))},_setOptions:function(t){var e=this,s=(this.options,!1),n=!1,o={};i.each(t,function(t,a){e._setOption(t,a),t in e.sizeRelatedOptions&&(-1===i.inArray(t,e._cnst.dimensions)?s=!0:e.options[t]=a=Math.max(a,e.options["min"+e._ucFirst(t)]),n=!0),t in e.resizableRelatedOptions&&(o[t]=a)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o),n&&(this._setWidth(),this._setHeight(),this.refreshPosition())},_setOption:function(t,e){var s=i.extend(!0,{},this.options[t]);this._checkForInvalidOptions(i.simone.window.prototype.options,t),"title"===t?this._cacheTitle(e):"taskbar"===t?this._taskbarUnbind():("modal"===t||"modalOverlay"===t)&&(this._revertModalZIndexes({force:!0}),this._destroyOverlay()),"widgetClass"===t&&this.uiDialog.removeClass(this.options.widgetClass).addClass(e),"closeText"!==t&&"position"!==t?this._superApply(arguments):this.options[t]=e,this._debugOptions(),("minimizable"===t||"maximizable"===t)&&this._setMinimizableMaximizableClasses(),"maximizable"===t?this._createButton("maximize"):"minimizable"===t?this._createButton("minimize"):"icons"===t?(this._setWindowIcon(),this._refreshButtonIcons(),this._propagateConfirmCloseOptions(t,s)):"titleLocalized"===t||"title"===t?(this._createTitleForEmpty(),this._title(),this._propagateConfirmCloseOptions(t,s)):"maximized"===t?this._toggleMaximized(e):"containment"===t?(this._setContainment(),this.refreshPosition()):"position"===t?(this._position(),this._setRestoreSize(),this.refreshPosition()):"width"===t||"maxWidth"===t?(this._setWidth(),this.refreshPosition()):"height"===t||"maxHeight"===t?(this._setHeight(),this.refreshPosition()):"modal"===t||"modalOverlay"===t?(this._createOverlay(),this._modalZIndexes({revertActive:!1})):"closable"===t?this._setButtonCloseState():"buttons"===t?this.refreshPosition():"taskbar"===t?(this._rebindTaskbar(),this._propagateConfirmCloseOptions(t,s)):"confirmClose"===t||"durations"===t?this._propagateConfirmCloseOptions(t,s):"embeddedContent"===t?this._placeOverlay():"group"===t?this._refreshGroup():i.inArray(t,this._unsupportedOptions)>-1?(this._debugUnsupportedOptions(),this._resetUnsupportedOptions()):"appendTo"===t&&this.overlay&&this.overlay.prependTo(this._appendTo())},destroy:function(){if(this._onInteractionEnd("destroy")===!0)return this;if(!this._cache.destroyed){if(!this._cache.closeInevitable&&this._cache.initialized)return this._cache.closeForced=!0,void this.close();var t=this;this._cache.destroyed=!0,this._clearTimeouts(),this._preventGlobalWindowClick(),this.$elem.removeClass(this.classes.modal),this._moveToTop({highest:!0}),this.$window.removeUniqueId().removeClass(this.classes.windowContent+" "+this.classes.confirmClose).removeData(this._cnst.dataPrefix+"window"),this.$elem.stop(!0,!0).removeClass(this.classes.window),this._super(),this.$window.attr("style",this._cache.inlineCSS),i.each(["class","style"],function(i,e){""===t.$window.attr(e)&&t.$window.removeAttr(e)})}}}),i.simone.windowSetup=function(t,e){e=1===arguments.length?t:e,t===!0&&arguments.length>1&&i("."+i.simone.window.prototype.classes.windowContent).window("option",e);var s=i.simone.window.prototype.options;return e?i.extend(!0,s,e):s}}(jQuery);